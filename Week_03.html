<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 03: Loops in Python | Computer Programming II</title>
    
    <!-- Pyodide for Python execution -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-cream: #faf9f7;
            --bg-dark: #1a1a2e;
            --bg-code: #1e1e2e;
            --text-primary: #1a1a2e;
            --text-secondary: #444;
            --text-muted: #666;
            --accent: #7c3aed;
            --accent-light: rgba(124, 58, 237, 0.1);
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --border: #e5e5e5;
            --card-bg: #ffffff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Crimson Pro', Georgia, serif; font-size: 19px; line-height: 1.8; background: var(--bg-cream); color: var(--text-primary); }
        /* Topbar */
        .topbar { background: var(--bg-dark); color: white; padding: 0 20px; height: 48px; position: sticky; top: 0; z-index: 100; display: flex; align-items: center; justify-content: space-between; }
        .topbar a { color: white; text-decoration: none; font-family: system-ui, sans-serif; font-size: 0.85rem; opacity: 0.85; transition: opacity 0.2s; }
        .topbar a:hover { opacity: 1; }
        .home-link { white-space: nowrap; }
        .topbar-right { display: flex; align-items: center; gap: 16px; font-family: system-ui, sans-serif; font-size: 0.82rem; }
        .topbar-progress { position: absolute; bottom: 0; left: 0; height: 2px; background: linear-gradient(90deg, var(--accent), #a78bfa); transition: width 0.15s ease-out; border-radius: 0 1px 1px 0; }
        .topbar-toc-center { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); }
        .topbar-toc-current { display: flex; align-items: center; gap: 6px; cursor: pointer; padding: 4px 14px; border-radius: 6px; transition: background 0.2s; font-family: system-ui, sans-serif; font-size: 0.82rem; color: rgba(255,255,255,0.9); user-select: none; }
        .topbar-toc-current:hover { background: rgba(255,255,255,0.08); }
        .topbar-toc-current .cur-num { opacity: 0.5; margin-right: 2px; }
        .topbar-toc-current .cur-label { max-width: 220px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .topbar-toc-current .cur-arrow { font-size: 0.6rem; opacity: 0.5; transition: transform 0.2s; }
        .topbar-toc-center.open .cur-arrow { transform: rotate(180deg); }
        .topbar-toc-dropdown { display: none; position: absolute; top: calc(100% + 8px); left: 50%; transform: translateX(-50%); background: var(--bg-dark); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; min-width: 300px; max-height: 70vh; overflow-y: auto; padding: 8px 0; box-shadow: 0 12px 40px rgba(0,0,0,0.4); }
        .topbar-toc-center.open .topbar-toc-dropdown { display: block; }
        .toc-item { display: flex; align-items: center; gap: 10px; padding: 8px 18px; font-family: system-ui, sans-serif; font-size: 0.82rem; color: rgba(255,255,255,0.6); cursor: pointer; transition: all 0.15s; text-decoration: none; }
        .toc-item:hover { background: rgba(255,255,255,0.06); color: #fff; }
        .toc-item.active { color: #a78bfa; font-weight: 600; }
        .toc-item.visited .toc-check { opacity: 1; color: #4ade80; }
        .toc-num { opacity: 0.4; min-width: 22px; }
        .toc-check { opacity: 0; font-size: 0.7rem; margin-left: auto; transition: opacity 0.3s; }
        .scroll-progress { position: fixed; bottom: 20px; right: 20px; width: 44px; height: 44px; border-radius: 50%; background: var(--bg-dark); display: flex; align-items: center; justify-content: center; font-family: system-ui, sans-serif; font-size: 0.7rem; font-weight: 600; color: rgba(255,255,255,0.9); box-shadow: 0 4px 16px rgba(0,0,0,0.2); z-index: 90; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .scroll-progress.visible { opacity: 1; }
        .scroll-progress svg { position: absolute; top: 0; left: 0; width: 44px; height: 44px; transform: rotate(-90deg); }
        .scroll-progress circle { fill: none; stroke-width: 3; }
        .scroll-progress .bg { stroke: rgba(255,255,255,0.1); }
        .scroll-progress .fg { stroke: var(--accent); stroke-linecap: round; transition: stroke-dashoffset 0.15s ease-out; }
        .run-all-btn { background: transparent; color: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.2); padding: 4px 14px; border-radius: 4px; font-family: system-ui, sans-serif; font-size: 0.75rem; cursor: pointer; transition: all 0.2s; white-space: nowrap; margin-left: 10px; }
        .run-all-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }
        .run-all-btn.running { color: #a78bfa; border-color: rgba(124,58,237,0.4); pointer-events: none; }
        .run-all-btn.success { color: #4ade80; border-color: rgba(74,222,128,0.4); background: rgba(74,222,128,0.1); }
        .run-all-btn.failure { color: #f87171; border-color: rgba(248,113,113,0.4); background: rgba(248,113,113,0.1); }
        .code-run-status { display: inline-flex; align-items: center; gap: 5px; font-family: system-ui, sans-serif; font-size: 0.7rem; margin-left: 10px; opacity: 0; transition: opacity 0.3s; }
        .code-run-status.visible { opacity: 1; }
        .code-run-status.pass { color: #4ade80; }
        .code-run-status.fail { color: #f87171; }
        .container { max-width: 1100px; margin: 0 auto; padding: 50px 24px 80px; }
        .chapter-header { text-align: center; margin-bottom: 50px; padding-bottom: 40px; border-bottom: 2px solid var(--border); }
        .chapter-label { display: inline-block; background: var(--accent); color: white; padding: 6px 18px; border-radius: 20px; font-size: 0.85rem; font-family: system-ui, sans-serif; font-weight: 500; margin-bottom: 20px; }
        .chapter-header h1 { font-size: 2.8rem; font-weight: 700; color: var(--text-primary); margin-bottom: 16px; }
        .chapter-meta { display: flex; justify-content: center; gap: 30px; color: var(--text-muted); font-size: 1rem; }
        .objectives-box { background: linear-gradient(135deg, var(--accent-light), rgba(124, 58, 237, 0.05)); border: 1px solid rgba(124, 58, 237, 0.2); border-left: 4px solid var(--accent); border-radius: 8px; padding: 28px; margin-bottom: 50px; }
        .objectives-box h3 { font-size: 1.2rem; margin-bottom: 16px; color: var(--accent); }
        .objectives-box ul { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 10px 30px; list-style: none; }
        .objectives-box li { color: var(--text-secondary); font-size: 0.95rem; padding-left: 28px; position: relative; }
        .objectives-box li::before { content: '‚úì'; position: absolute; left: 0; color: var(--success); font-weight: bold; }
        .section { margin-bottom: 60px; scroll-margin-top: 70px; }
        .section-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid var(--border); }
        .section-number { display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; background: var(--accent); color: white; border-radius: 10px; font-size: 1.2rem; font-weight: 700; font-family: system-ui, sans-serif; }
        .section-header h2 { font-size: 1.6rem; font-weight: 600; color: var(--text-primary); }
        .content p { color: var(--text-secondary); margin-bottom: 18px; }
        .content h3 { font-size: 1.25rem; font-weight: 600; margin: 35px 0 16px; color: var(--text-primary); }
        .content h4 { font-size: 1.1rem; font-weight: 600; margin: 25px 0 12px; color: var(--accent); }
        .content ul, .content ol { color: var(--text-secondary); margin: 16px 0 20px 28px; }
        .content li { margin-bottom: 8px; }
        code { font-family: 'JetBrains Mono', monospace; background: rgba(124, 58, 237, 0.1); padding: 2px 8px; border-radius: 4px; font-size: 0.85em; color: var(--accent); }
        .code-figure { background: var(--bg-code); border-radius: 10px; margin: 20px 0; overflow: hidden; border: 1px solid #333; }
        .code-figure-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 16px; background: rgba(255,255,255,0.05); border-bottom: 1px solid #333; }
        .code-figure-label { font-family: system-ui, sans-serif; font-size: 0.8rem; color: #a78bfa; font-weight: 500; }
        .code-figure-run { background: var(--success); color: white; border: none; padding: 6px 14px; border-radius: 6px; font-family: system-ui, sans-serif; font-size: 0.8rem; font-weight: 600; cursor: pointer; }
        .code-figure-run:hover { background: #047857; }
        .code-editor { width: 100%; min-height: 80px; max-height: 300px; padding: 16px; background: var(--bg-code); border: none; color: #e4e4e7; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; line-height: 1.6; resize: vertical; outline: none; overflow-y: auto; }
        .code-output { background: rgba(5, 150, 105, 0.1); border-top: 1px solid #333; padding: 14px 16px; display: none; max-height: 200px; overflow-y: auto; }
        .code-output.show { display: block; }
        .code-output-label { font-family: system-ui, sans-serif; font-size: 0.75rem; font-weight: 600; color: var(--success); text-transform: uppercase; margin-bottom: 8px; }
        .code-output-content { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: #d4d4d8; white-space: pre-wrap; }
        
        .code-figure .code-split { display: flex; flex-direction: row; align-items: stretch; border-radius: 0 0 4px 4px; }
        .code-figure .code-split .code-input-sizer { flex: 1 1 50%; min-width: 0; display: grid; border-right: 1px solid #28283c; background: #1e1e2e; }
        .code-figure .code-split .code-input-sizer > textarea,
        .code-figure .code-split .code-input-sizer > .code-input-mirror { grid-area: 1 / 1; font-size: 0.82rem; line-height: 1.7; padding: 14px 16px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: 'JetBrains Mono', monospace; min-height: 60px; }
        .code-figure .code-split .code-input-sizer > textarea { resize: none; overflow: hidden; color: #e0e0e0; background: transparent; border: none; outline: none; z-index: 1; max-height: none; }
        .code-figure .code-split .code-input-sizer > .code-input-mirror { visibility: hidden; pointer-events: none; }
        .code-figure .code-split .code-output { flex: 1 1 50%; min-width: 0; border-top: none; display: block; overflow-y: auto; padding: 0; box-sizing: border-box; max-height: none; }
        .code-figure .code-split .code-output .code-output-label { display: none; }
        .code-figure .code-split .code-output .code-output-content { font-size: 0.82rem; line-height: 1.7; padding: 14px 16px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: 'JetBrains Mono', monospace; min-height: 60px; }
        .code-figure .code-split .code-output.show { display: block; opacity: 1; }
        .code-figure .code-split .code-output:not(.show) { display: block; opacity: 0.4; }
        .code-figure .code-split .code-output:not(.show) .code-output-content::before { content: '\2190 Click \25b6 Run to see aligned output'; color: #555; font-style: italic; }
        
        .exercise-body { padding: 0 !important; display: grid; grid-template-columns: 1fr 1fr; min-height: 280px; }
        .exercise-info-panel { padding: 24px; border-right: 1px solid var(--border); overflow-y: auto; max-height: 450px; background: rgba(249,115,22,0.02); }
        .exercise-info-panel .exercise-description { margin-bottom: 16px; }
        .exercise-info-panel .expected-output { margin: 12px 0 16px; }
        .exercise-info-panel .hints-container { margin-top: 12px; }
        .exercise-code-panel { display: flex; flex-direction: column; }
        .exercise-code-panel .code-figure { margin: 0; border: none; border-radius: 0; flex: 1; display: flex; flex-direction: column; }
        .exercise-code-panel .code-figure-header { border-radius: 0; }
        .exercise-code-panel .code-editor { flex: 1; min-height: 150px; max-height: none; resize: none; }
        .exercise-code-panel .code-output { max-height: 180px; }
        .exercise-code-panel .code-figure-caption { border-top: 1px solid #28283c; }

        @media (max-width: 900px) {
            .exercise-body { grid-template-columns: 1fr; }
            .exercise-info-panel { border-right: none; border-bottom: 1px solid var(--border); max-height: none; }
            .code-figure .code-split { flex-direction: column; }
            .code-figure .code-split .code-input-sizer { flex: none; width: 100%; border-right: none; border-bottom: 1px solid #28283c; }
            .code-figure .code-split .code-output { flex: none; width: 100%; }
        }
        .info-box { padding: 18px 24px; border-radius: 8px; margin: 24px 0; border-left: 4px solid; }
        .info-box p { margin: 0; color: var(--text-secondary); font-size: 0.95rem; }
        .tip-box { background: rgba(5, 150, 105, 0.08); border-color: var(--success); }
        .tip-box::before { content: 'üí° Tip'; display: block; font-weight: 600; color: var(--success); margin-bottom: 8px; font-size: 0.9rem; }
        .warning-box { background: rgba(217, 119, 6, 0.08); border-color: var(--warning); }
        .warning-box::before { content: '‚ö†Ô∏è Important'; display: block; font-weight: 600; color: var(--warning); margin-bottom: 8px; font-size: 0.9rem; }
        .table-container { overflow-x: auto; margin: 24px 0; border-radius: 10px; border: 1px solid var(--border); }
        table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
        th { background: var(--bg-dark); color: white; padding: 14px 18px; text-align: left; font-weight: 600; font-family: system-ui, sans-serif; }
        td { padding: 14px 18px; border-bottom: 1px solid var(--border); color: var(--text-secondary); }
        tr:last-child td { border-bottom: none; }
        .exercise-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; margin: 28px 0; overflow: hidden; }
        .exercise-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 24px; background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(124, 58, 237, 0.05)); border-bottom: 1px solid var(--border); }
        .exercise-title { font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 12px; }
        .exercise-number { background: linear-gradient(135deg, #7c3aed, #7c3aed); color: white; width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; font-weight: 700; font-family: system-ui, sans-serif; }
        .difficulty { padding: 5px 14px; border-radius: 15px; font-size: 0.8rem; font-weight: 600; font-family: system-ui, sans-serif; }
        .difficulty.easy { background: rgba(5, 150, 105, 0.12); color: var(--success); }
        .difficulty.medium { background: rgba(217, 119, 6, 0.12); color: var(--warning); }
        .difficulty.hard { background: rgba(220, 38, 38, 0.12); color: var(--danger); }
        .expected-output { background: rgba(5, 150, 105, 0.06); border: 1px solid rgba(5, 150, 105, 0.15); border-radius: 8px; padding: 16px 20px; margin: 20px 0; }
        .expected-output-label { font-size: 0.8rem; font-weight: 600; color: var(--success); text-transform: uppercase; margin-bottom: 10px; font-family: system-ui, sans-serif; }
        .expected-output pre { font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; color: var(--text-secondary); margin: 0; background: transparent; padding: 0; }
        .hints-toggle { display: inline-flex; align-items: center; gap: 8px; padding: 10px 18px; background: var(--accent-light); border: 1px solid rgba(124, 58, 237, 0.2); border-radius: 8px; color: var(--accent); font-size: 0.9rem; cursor: pointer; font-family: inherit; }
        .hints-content { display: none; background: rgba(124, 58, 237, 0.05); border: 1px solid rgba(124, 58, 237, 0.12); border-radius: 8px; padding: 18px 24px; margin-top: 14px; }
        .hints-content.show { display: block; }
        .hints-content ul { margin: 0; padding-left: 20px; }
        .submit-section { background: var(--bg-dark); border-radius: 14px; padding: 40px; margin: 60px 0; color: white; }
        .submit-section h2 { font-size: 1.6rem; margin-bottom: 10px; color: white; }
        .submit-section > p { color: rgba(255,255,255,0.7); margin-bottom: 28px; }
        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 18px; margin-bottom: 24px; }
        .form-group label { display: block; font-size: 0.85rem; font-weight: 500; margin-bottom: 8px; color: rgba(255,255,255,0.8); font-family: system-ui, sans-serif; }
        .form-group input { width: 100%; padding: 14px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1rem; font-family: inherit; }
        .form-group input:focus { outline: none; border-color: var(--accent); }
        .honeypot { position: absolute; left: -9999px; }
        .submit-btn { background: var(--accent); color: white; border: none; padding: 16px 40px; border-radius: 8px; font-size: 1.05rem; font-weight: 600; cursor: pointer; font-family: system-ui, sans-serif; }
        .submit-status { margin-top: 20px; padding: 16px 20px; border-radius: 8px; font-family: system-ui, sans-serif; display: none; }
        .week-nav { display: flex; justify-content: space-between; align-items: center; margin-top: 60px; padding: 30px 0; border-top: 1px solid #ddd; }
        .week-nav a { display: flex; flex-direction: column; text-decoration: none; color: #7c3aed; font-family: system-ui, sans-serif; font-size: 0.9rem; padding: 12px 20px; border-radius: 8px; transition: background 0.2s; max-width: 45%; }
        .week-nav a:hover { background: #f3f0ff; }
        .week-nav a .nav-direction { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: #999; margin-bottom: 4px; }
        .week-nav a .nav-title { font-weight: 600; }
        .week-nav a.nav-next { text-align: right; margin-left: auto; }
        .week-nav a.nav-prev { text-align: left; margin-right: auto; }
        .summary-box { background: linear-gradient(135deg, var(--accent-light), rgba(124, 58, 237, 0.05)); border: 1px solid rgba(124, 58, 237, 0.2); border-radius: 12px; padding: 30px; margin: 50px 0; }
        .summary-box h3 { color: var(--accent); margin-bottom: 20px; font-size: 1.3rem; }
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; }
        .summary-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: var(--card-bg); border-radius: 8px; font-size: 0.95rem; }
        .file-tree { background: var(--bg-code); border-radius: 10px; padding: 20px; margin: 20px 0; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; color: #e4e4e7; white-space: pre; }
        @media (max-width: 700px) {
            .chapter-header h1 { font-size: 2rem; }
            .form-grid { grid-template-columns: 1fr; }
            .topbar { padding: 0 15px; }
            .topbar-toc-current .cur-label { max-width: 140px; }
            .topbar-toc-dropdown { min-width: 260px; }
            .scroll-progress { bottom: 12px; right: 14px; }
            .run-all-btn { font-size: 0.7rem; padding: 3px 10px; }
            .topbar-right span { display: none; }
        }

        .note-box { padding: 18px 24px; border-radius: 8px; margin: 24px 0; border-left: 4px solid var(--accent); background: var(--accent-light); }
        .note-box::before { content: 'üìù Note'; display: block; font-weight: 600; color: var(--accent); margin-bottom: 8px; font-size: 0.9rem; }
        .note-box p { margin: 0; color: var(--text-secondary); font-size: 0.95rem; }
        .danger-box { padding: 18px 24px; border-radius: 8px; margin: 16px 0; border-left: 4px solid var(--danger); background: rgba(220, 38, 38, 0.05); }
        .danger-box::before { content: '‚ùå Common Mistake'; display: block; font-weight: 600; color: var(--danger); margin-bottom: 8px; font-size: 0.9rem; }
        .danger-box p { margin: 0; color: var(--text-secondary); font-size: 0.95rem; }
        .quiz-box { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; margin: 30px 0; overflow: hidden; }
        .quiz-header { padding: 14px 20px; background: linear-gradient(135deg, rgba(5,150,105,0.1), rgba(5,150,105,0.03)); border-bottom: 1px solid var(--border); font-family: system-ui, sans-serif; font-weight: 600; color: var(--success); font-size: 0.95rem; }
        .quiz-body { padding: 20px; }
        .quiz-q { margin: 12px 0; padding: 14px 18px; background: rgba(124, 58, 237, 0.03); border-radius: 8px; border: 1px solid var(--border); }
        .quiz-q strong { color: var(--accent); font-family: system-ui, sans-serif; }
        .quiz-q .answer { color: var(--accent); font-size: 0.9rem; margin-top: 8px; cursor: pointer; display: inline-block; padding: 4px 12px; border-radius: 6px; background: var(--accent-light); border: 1px solid rgba(124,58,237,0.2); font-family: system-ui, sans-serif; }
        .quiz-q .answer:hover { background: rgba(124, 58, 237, 0.15); }
        .quiz-q .answer-text { display: none; color: var(--success); margin-top: 8px; font-size: 0.93rem; padding: 10px 14px; background: rgba(5,150,105,0.06); border-radius: 6px; border-left: 3px solid var(--success); }
        .content strong { color: var(--text-primary); }
    </style>
</head>
<body>
    <nav class="topbar">
        <a class="home-link" href="index.html?home=true">‚Üê Course Home</a>

        <div class="topbar-toc-center" id="tocCenter">
            <div class="topbar-toc-current" onclick="document.getElementById('tocCenter').classList.toggle('open')">
                <span class="cur-num" id="tocCurNum">1.</span>
                <span class="cur-label" id="tocCurLabel">Introduction to Loops</span>
                <span class="cur-arrow">‚ñº</span>
            </div>
            <div class="topbar-toc-dropdown" id="tocDropdown"></div>
        </div>

        <div class="topbar-right">
            <button class="run-all-btn" id="runAllBtn" onclick="runAllCode()">‚ñ∂ Run All</button>
            <a href="Week_02.html">‚Üê Week 02</a>
            <a href="Week_04.html">Week 04 ‚Üí</a>
        </div>
        <div class="topbar-progress" id="topbarProgress"></div>
    </nav>

    <!-- Floating scroll progress badge -->
    <div class="scroll-progress" id="scrollProgress">
        <svg viewBox="0 0 44 44"><circle class="bg" cx="22" cy="22" r="19"/><circle class="fg" id="scrollCircle" cx="22" cy="22" r="19" stroke-dasharray="119.38" stroke-dashoffset="119.38"/></svg>
        <span id="scrollPct">0%</span>
    </div>
    
    <div class="container">
        <header class="chapter-header">
            <span class="chapter-label">Week 03</span>
            <h1>Loops in Python</h1>
            <div class="chapter-meta">
                <span>üìö Computer Programming II</span>
                <span>üë®‚Äçüè´ Dr. Arif Solmaz</span>
            </div>
        </header>
        
        <div class="objectives-box">
            <h3>üéØ Learning Objectives</h3>
            <ul>
                <li>Understand the concept and importance of loops</li>
                <li>Use for loops to iterate over sequences</li>
                <li>Master the range() function for numeric sequences</li>
                <li>Apply enumerate() and zip() effectively</li>
                <li>Implement while loops for condition-based iteration</li>
                <li>Control loop flow with break and continue</li>
                <li>Create nested loops for complex patterns</li>
                <li>Apply common loop patterns in engineering problems</li>
            </ul>
        </div>

        <!-- Recap Quiz: Week 2 Review -->
        <section id="recap" class="section" style="scroll-margin-top: 70px;">
            <div class="section-header">
                <div class="section-number" style="background: var(--success);">üß†</div>
                <h2>Recap Quiz: Week 2 Review</h2>
            </div>
            <p>Before diving into loops, let's make sure last week's control flow concepts are solid.</p>
            <div class="quiz-box">
                <div class="quiz-header">üß† Quick Review ‚Äî Test Your Week 2 Knowledge</div>
                <div class="quiz-body">
                    <div class="quiz-q">
                        <strong>Q1:</strong> What does this print? <code>x = 15; print("A" if x > 10 else "B")</code><br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ <code>A</code> ‚Äî This is a ternary expression. Since 15 > 10 is True, it evaluates to "A".</div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q2:</strong> Is this valid? <code>if x > 5 and < 10:</code><br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ ‚ùå Invalid! Must be <code>if x > 5 and x < 10:</code> (or the Pythonic <code>if 5 < x < 10:</code>). Each comparison needs the variable name.</div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q3:</strong> What's the difference between <code>and</code> and <code>or</code>?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ <code>and</code> requires BOTH conditions to be True. <code>or</code> requires at least ONE condition to be True.</div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q4:</strong> Which executes its block: <code>if 0:</code> or <code>if 1:</code>?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ <code>if 1:</code> ‚Äî In Python, 0 is falsy (treated as False), any non-zero number is truthy (treated as True).</div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q5:</strong> How many possible paths does an <code>if / elif / elif / else</code> block have?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ 4 paths ‚Äî one for the <code>if</code>, one for each <code>elif</code>, and one for the <code>else</code>. Only ONE path ever executes.</div>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="content">
            <!-- Section 1: Introduction to Loops -->
            <section id="part1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <h2>Introduction to Loops</h2>
                </div>
                
                <p>Loops are one of the most fundamental and powerful concepts in programming. They allow you to execute a block of code <strong>multiple times</strong> without writing it repeatedly. Think of loops as automation tools ‚Äì they let you write code once and run it as many times as needed.</p>
                
                <h3>Why Do We Need Loops?</h3>
                <p>Imagine you need to print numbers from 1 to 1000. Without loops, you would need to write 1000 print statements! With loops, you can do it in just 2 lines of code.</p>
                
                <ul>
                    <li><strong>Automation</strong> ‚Äì Write code once, run it many times</li>
                    <li><strong>Processing collections</strong> ‚Äì Work through lists, strings, files, databases</li>
                    <li><strong>Calculations</strong> ‚Äì Sum numbers, find averages, accumulate results</li>
                    <li><strong>Pattern generation</strong> ‚Äì Create sequences, shapes, and complex structures</li>
                    <li><strong>Data analysis</strong> ‚Äì Process sensor readings, log files, user inputs</li>
                </ul>
                
                <h3>Types of Loops in Python</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Loop Type</th>
                                <th>Best Used When</th>
                                <th>Example Use Case</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><code>for</code></td><td>Number of iterations is <strong>known</strong></td><td>Processing all items in a list</td></tr>
                            <tr><td><code>while</code></td><td>Number of iterations is <strong>unknown</strong></td><td>Input validation, waiting for condition</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="tip-box info-box">
                    <p><strong>Rule of Thumb:</strong> If you know how many times you need to repeat, use <code>for</code>. If you need to repeat until something happens, use <code>while</code>.</p>
                </div>
                
                <h4>Loop vs. Manual Repetition</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 1.1: Loop vs Manual</span>
                        <button class="code-figure-run" onclick="runCode('code1')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code1"># WITHOUT loops (bad practice):
print("Hello 1")
print("Hello 2")
print("Hello 3")

print("\n--- With a loop (good practice) ---\n")

# WITH loops (good practice):
for i in range(1, 4):
    print(f"Hello {i}")

# The loop version is shorter, cleaner, and easier to modify!</textarea>
                    <div class="code-output" id="outputcode1">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 2: The for Loop -->
            <section id="part2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <h2>The for Loop</h2>
                </div>
                
                <p>The <code>for</code> loop is the most common loop in Python. It iterates over any <strong>iterable</strong> object ‚Äì strings, lists, tuples, ranges, dictionaries, and more.</p>
                
                <h3>Basic Syntax</h3>
                <pre>for variable in iterable:
    # Code to execute for each item
    # (indented with 4 spaces)</pre>
                
                <h4>Simple for Loop Examples</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 2.1: Basic for Loop</span>
                        <button class="code-figure-run" onclick="runCode('code2')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code2"># Iterate over a list
fruits = ["apple", "banana", "cherry"]

for fruit in fruits:
    print(f"I like {fruit}")

print("\n--- Iterating over a string ---\n")

# Iterate over a string
word = "Python"
for letter in word:
    print(letter, end=" ")</textarea>
                    <div class="code-output" id="outputcode2">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Sum of Numbers</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 2.2: Sum Calculation</span>
                        <button class="code-figure-run" onclick="runCode('code3')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code3"># Calculate sum of numbers
numbers = [10, 20, 30, 40, 50]
total = 0

for num in numbers:
    total += num
    print(f"Added {num}, running total: {total}")

print(f"\nFinal sum: {total}")
print(f"Average: {total / len(numbers)}")</textarea>
                    <div class="code-output" id="outputcode3">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 3: The range() Function -->
            <section id="part3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <h2>The range() Function</h2>
                </div>
                
                <p>The <code>range()</code> function generates a sequence of numbers. It's commonly used with <code>for</code> loops when you need to iterate a specific number of times.</p>
                
                <h3>range() Syntax</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Syntax</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><code>range(stop)</code></td><td>0 to stop-1</td><td><code>range(5)</code> ‚Üí 0,1,2,3,4</td></tr>
                            <tr><td><code>range(start, stop)</code></td><td>start to stop-1</td><td><code>range(2, 6)</code> ‚Üí 2,3,4,5</td></tr>
                            <tr><td><code>range(start, stop, step)</code></td><td>start to stop-1, by step</td><td><code>range(0, 10, 2)</code> ‚Üí 0,2,4,6,8</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <h4>range() Examples</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 3.1: range() Variations</span>
                        <button class="code-figure-run" onclick="runCode('code4')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code4"># range(stop) - 0 to stop-1
print("range(5):", list(range(5)))

# range(start, stop) - start to stop-1
print("range(2, 7):", list(range(2, 7)))

# range(start, stop, step) - with step
print("range(0, 10, 2):", list(range(0, 10, 2)))

# Negative step (counting down)
print("range(10, 0, -1):", list(range(10, 0, -1)))</textarea>
                    <div class="code-output" id="outputcode4">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Multiplication Table</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 3.2: Multiplication Table</span>
                        <button class="code-figure-run" onclick="runCode('code5')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code5"># Print multiplication table for 7
print("üìä Multiplication Table for 7:")
print("-" * 20)

for i in range(1, 11):
    result = 7 * i
    print(f"  7 √ó {i:2d} = {result:2d}")</textarea>
                    <div class="code-output" id="outputcode5">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Countdown Example</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 3.3: Countdown</span>
                        <button class="code-figure-run" onclick="runCode('code6')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code6"># üöÄ Launch countdown
print("üöÄ Launch sequence:")
for i in range(10, 0, -1):
    print(f"  T-{i}...")
print("  üöÄ LIFTOFF!")</textarea>
                    <div class="code-output" id="outputcode6">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>

            <!-- Section 4: Iterating Collections -->
            <section id="part4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <h2>Iterating Over Collections</h2>
                </div>
                
                <p>Python's <code>for</code> loop can iterate over any iterable object including strings, lists, tuples, sets, and dictionaries.</p>
                
                <h4>String Processing</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 4.1: String Iteration</span>
                        <button class="code-figure-run" onclick="runCode('code7')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code7"># Count vowels in a string
text = "Hello World"
vowels = "aeiouAEIOU"
vowel_count = 0

for char in text:
    if char in vowels:
        vowel_count += 1

print(f"Text: '{text}'")
print(f"Vowel count: {vowel_count}")

# Reverse a string
reversed_text = ""
for char in text:
    reversed_text = char + reversed_text
print(f"Reversed: '{reversed_text}'")</textarea>
                    <div class="code-output" id="outputcode7">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>List Operations</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 4.2: List Processing</span>
                        <button class="code-figure-run" onclick="runCode('code8')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code8"># Find min and max manually
numbers = [34, 12, 89, 45, 67, 23]

min_val = numbers[0]
max_val = numbers[0]

for num in numbers:
    if num < min_val:
        min_val = num
    if num > max_val:
        max_val = num

print(f"Numbers: {numbers}")
print(f"Minimum: {min_val}")
print(f"Maximum: {max_val}")

# Filter even numbers
evens = []
for num in numbers:
    if num % 2 == 0:
        evens.append(num)
print(f"Even numbers: {evens}")</textarea>
                    <div class="code-output" id="outputcode8">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Dictionary Iteration</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 4.3: Dictionary Iteration</span>
                        <button class="code-figure-run" onclick="runCode('code9')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code9"># Iterate over dictionary
student_scores = {
    "Alice": 92,
    "Bob": 85,
    "Charlie": 78
}

# Keys only
print("Students:")
for name in student_scores:
    print(f"  - {name}")

# Keys and values
print("\nScores:")
for name, score in student_scores.items():
    print(f"  {name}: {score}")</textarea>
                    <div class="code-output" id="outputcode9">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 5: enumerate() and zip() -->
            <section id="part5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <h2>enumerate() and zip() Functions</h2>
                </div>
                
                <p><code>enumerate()</code> gives you index numbers automatically, while <code>zip()</code> lets you iterate over multiple sequences in parallel.</p>
                
                <h4>Using enumerate()</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 5.1: enumerate() Basics</span>
                        <button class="code-figure-run" onclick="runCode('code10')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code10"># enumerate() provides index + value
fruits = ["apple", "banana", "cherry"]

print("With enumerate():")
for index, fruit in enumerate(fruits):
    print(f"  {index}: {fruit}")

print("\nWith enumerate(start=1):")
for rank, fruit in enumerate(fruits, start=1):
    print(f"  #{rank}: {fruit}")</textarea>
                    <div class="code-output" id="outputcode10">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Using zip()</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 5.2: zip() Basics</span>
                        <button class="code-figure-run" onclick="runCode('code11')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code11"># zip() combines multiple lists
names = ["Alice", "Bob", "Charlie"]
scores = [92, 87, 95]

print("üìä Student Scores:")
for name, score in zip(names, scores):
    print(f"  {name}: {score}")

# Three lists together
subjects = ["Math", "Science", "English"]
grades = ["A", "B+", "A-"]
print("\nGrade Report:")
for name, subject, grade in zip(names, subjects, grades):
    print(f"  {name} got {grade} in {subject}")</textarea>
                    <div class="code-output" id="outputcode11">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Temperature Converter</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 5.3: Temperature Converter</span>
                        <button class="code-figure-run" onclick="runCode('code12')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code12"># Convert Celsius to Fahrenheit
celsius = [0, 10, 20, 30, 40]

print("#   Celsius   Fahrenheit")
print("-" * 25)
for i, c in enumerate(celsius, start=1):
    f = c * 9/5 + 32
    print(f"{i}   {c:5.1f}¬∞C ‚Üí {f:6.1f}¬∞F")</textarea>
                    <div class="code-output" id="outputcode12">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 6: The while Loop -->
            <section id="part6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <h2>The while Loop</h2>
                </div>
                
                <p>The <code>while</code> loop repeats as long as a condition is <code>True</code>. Use it when you don't know in advance how many iterations are needed.</p>
                
                <h3>Basic Syntax</h3>
                <pre>while condition:
    # Code to execute while condition is True
    # Must include something that changes the condition!</pre>
                
                <div class="warning-box info-box">
                    <p><strong>Infinite Loop Warning!</strong> Always ensure the condition will eventually become <code>False</code>, or your program will run forever.</p>
                </div>
                
                <h4>Basic while Loop</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 6.1: Basic while</span>
                        <button class="code-figure-run" onclick="runCode('code13')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code13"># Count to 5 using while
count = 1

while count <= 5:
    print(f"Count: {count}")
    count += 1  # Don't forget this!

print("Done counting!")</textarea>
                    <div class="code-output" id="outputcode13">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Sum Until Threshold</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 6.2: Sum Until Threshold</span>
                        <button class="code-figure-run" onclick="runCode('code14')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code14"># Add numbers until sum exceeds 100
total = 0
number = 1

while total <= 100:
    total += number
    print(f"Added {number}, total = {total}")
    number += 1

print(f"\nFirst sum over 100: {total}")
print(f"Numbers added: {number - 1}")</textarea>
                    <div class="code-output" id="outputcode14">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Guess the Number Game</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 6.3: Number Guessing</span>
                        <button class="code-figure-run" onclick="runCode('code15')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code15"># Simple guessing game simulation
secret = 7
guesses = [3, 9, 5, 7]  # Simulated guesses
attempts = 0

for guess in guesses:
    attempts += 1
    print(f"Guess {attempts}: {guess}")
    
    if guess == secret:
        print(f"üéâ Correct! Found in {attempts} attempts!")
        break
    elif guess < secret:
        print("  Too low!")
    else:
        print("  Too high!")</textarea>
                    <div class="code-output" id="outputcode15">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>while-else Clause</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 6.4: while-else</span>
                        <button class="code-figure-run" onclick="runCode('code16')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code16"># while-else: else runs if loop completes normally
n = 5
while n > 0:
    print(f"n = {n}")
    n -= 1
else:
    print("Loop completed normally!")

print("\n--- With break (else won't run) ---")
n = 5
while n > 0:
    if n == 3:
        print("Breaking at n=3")
        break
    print(f"n = {n}")
    n -= 1
else:
    print("This won't print!")</textarea>
                    <div class="code-output" id="outputcode16">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 7: break Statement -->
            <section id="part7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <h2>The break Statement</h2>
                </div>
                
                <p>The <code>break</code> statement immediately exits the loop, skipping any remaining iterations. It's useful for stopping a loop when a condition is met.</p>
                
                <h4>Find First Match</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 7.1: Find First Match</span>
                        <button class="code-figure-run" onclick="runCode('code17')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code17"># Find first even number
numbers = [7, 3, 9, 4, 2, 8]

for num in numbers:
    print(f"Checking {num}...")
    if num % 2 == 0:
        print(f"‚úì Found first even: {num}")
        break

print("Search complete")</textarea>
                    <div class="code-output" id="outputcode17">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Prime Number Check</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 7.2: Prime Check</span>
                        <button class="code-figure-run" onclick="runCode('code18')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code18"># Check if a number is prime
num = 17
is_prime = True

if num < 2:
    is_prime = False
else:
    for i in range(2, int(num**0.5) + 1):
        if num % i == 0:
            is_prime = False
            print(f"{num} is divisible by {i}")
            break

if is_prime:
    print(f"{num} is prime!")
else:
    print(f"{num} is not prime")</textarea>
                    <div class="code-output" id="outputcode18">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>

            <!-- Section 8: continue Statement -->
            <section id="part8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <h2>The continue Statement</h2>
                </div>
                
                <p>The <code>continue</code> statement skips the rest of the current iteration and moves to the next one. Unlike <code>break</code>, it doesn't exit the loop entirely.</p>
                
                <h4>Skip Negative Numbers</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 8.1: Skip with continue</span>
                        <button class="code-figure-run" onclick="runCode('code19')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code19"># Sum only positive numbers
numbers = [10, -5, 20, -3, 15, -8, 25]
total = 0

for num in numbers:
    if num < 0:
        print(f"Skipping {num} (negative)")
        continue
    total += num
    print(f"Added {num}, total = {total}")

print(f"\nSum of positives: {total}")</textarea>
                    <div class="code-output" id="outputcode19">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Print Odd Numbers Only</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 8.2: Filter with continue</span>
                        <button class="code-figure-run" onclick="runCode('code20')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code20"># Print only odd numbers from 1-10
print("Odd numbers 1-10:")
for i in range(1, 11):
    if i % 2 == 0:  # Skip even numbers
        continue
    print(i, end=" ")
print()  # New line</textarea>
                    <div class="code-output" id="outputcode20">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>break vs continue Comparison</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 8.3: break vs continue</span>
                        <button class="code-figure-run" onclick="runCode('code21')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code21"># Compare break and continue
print("With CONTINUE (skip 3):")
for i in range(1, 6):
    if i == 3:
        continue
    print(i, end=" ")

print("\n\nWith BREAK (stop at 3):")
for i in range(1, 6):
    if i == 3:
        break
    print(i, end=" ")
print()</textarea>
                    <div class="code-output" id="outputcode21">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 9: Nested Loops -->
            <section id="part9" class="section">
                <div class="section-header">
                    <div class="section-number">9</div>
                    <h2>Nested Loops</h2>
                </div>
                
                <p>A nested loop is a loop inside another loop. The inner loop completes all its iterations for each iteration of the outer loop.</p>
                
                <h4>Multiplication Table</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 9.1: Multiplication Table</span>
                        <button class="code-figure-run" onclick="runCode('code22')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code22"># Print multiplication table
print("    ", end="")
for j in range(1, 6):
    print(f"{j:4}", end="")
print("\n" + "-" * 25)

for i in range(1, 6):
    print(f"{i} |", end="")
    for j in range(1, 6):
        print(f"{i*j:4}", end="")
    print()</textarea>
                    <div class="code-output" id="outputcode22">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Pattern Printing</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 9.2: Star Pattern</span>
                        <button class="code-figure-run" onclick="runCode('code23')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code23"># Right triangle pattern
rows = 5

print("Right Triangle:")
for i in range(1, rows + 1):
    for j in range(i):
        print("*", end="")
    print()

print("\nPyramid:")
for i in range(1, rows + 1):
    # Spaces
    for j in range(rows - i):
        print(" ", end="")
    # Stars
    for k in range(2 * i - 1):
        print("*", end="")
    print()</textarea>
                    <div class="code-output" id="outputcode23">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Matrix Operations</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 9.3: Matrix Sum</span>
                        <button class="code-figure-run" onclick="runCode('code24')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code24"># 2D list (matrix) operations
matrix = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
]

print("Matrix:")
for row in matrix:
    print(row)

# Sum all elements
total = 0
for row in matrix:
    for element in row:
        total += element

print(f"\nSum of all elements: {total}")</textarea>
                    <div class="code-output" id="outputcode24">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 10: Common Loop Patterns -->
            <section id="part10" class="section">
                <div class="section-header">
                    <div class="section-number">10</div>
                    <h2>Common Loop Patterns</h2>
                </div>
                
                <p>Here are frequently used loop patterns that you'll encounter in programming.</p>
                
                <h4>Accumulator Pattern</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 10.1: Accumulator</span>
                        <button class="code-figure-run" onclick="runCode('code25')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code25"># Accumulator pattern: building up a result
numbers = [4, 2, 8, 5, 1]

# Sum
total = 0
for num in numbers:
    total += num
print(f"Sum: {total}")

# Product
product = 1
for num in numbers:
    product *= num
print(f"Product: {product}")

# String building
chars = ['H', 'e', 'l', 'l', 'o']
word = ""
for char in chars:
    word += char
print(f"Word: {word}")</textarea>
                    <div class="code-output" id="outputcode25">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Counter Pattern</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 10.2: Counter</span>
                        <button class="code-figure-run" onclick="runCode('code26')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code26"># Count occurrences
text = "mississippi"
target = "s"
count = 0

for char in text:
    if char == target:
        count += 1

print(f"'{target}' appears {count} times in '{text}'")</textarea>
                    <div class="code-output" id="outputcode26">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Search Pattern</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 10.3: Search</span>
                        <button class="code-figure-run" onclick="runCode('code27')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code27"># Linear search
numbers = [15, 42, 7, 23, 36, 9]
target = 23
found_index = -1

for i, num in enumerate(numbers):
    if num == target:
        found_index = i
        break

if found_index != -1:
    print(f"Found {target} at index {found_index}")
else:
    print(f"{target} not found")</textarea>
                    <div class="code-output" id="outputcode27">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Filter Pattern</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 10.4: Filter</span>
                        <button class="code-figure-run" onclick="runCode('code28')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code28"># Filter elements matching criteria
scores = [45, 92, 73, 88, 56, 81, 67, 95]
passing_score = 70

passed = []
failed = []

for score in scores:
    if score >= passing_score:
        passed.append(score)
    else:
        failed.append(score)

print(f"All scores: {scores}")
print(f"Passed (‚â•{passing_score}): {passed}")
print(f"Failed (<{passing_score}): {failed}")</textarea>
                    <div class="code-output" id="outputcode28">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 11: Engineering Applications -->
            <section id="part11" class="section">
                <div class="section-header">
                    <div class="section-number">11</div>
                    <h2>Engineering Applications</h2>
                </div>
                
                <h4>Sensor Data Analysis</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 11.1: Sensor Analysis</span>
                        <button class="code-figure-run" onclick="runCode('code29')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code29"># Analyze temperature sensor readings
readings = [22.5, 23.1, 25.8, 24.2, 28.5, 22.0, 26.3]
threshold = 26.0

print("üå°Ô∏è Temperature Analysis")
print("=" * 30)

# Calculate statistics
total = 0
max_temp = readings[0]
min_temp = readings[0]
alerts = 0

for temp in readings:
    total += temp
    if temp > max_temp:
        max_temp = temp
    if temp < min_temp:
        min_temp = temp
    if temp > threshold:
        alerts += 1

avg = total / len(readings)

print(f"Readings: {len(readings)}")
print(f"Average: {avg:.1f}¬∞C")
print(f"Maximum: {max_temp}¬∞C")
print(f"Minimum: {min_temp}¬∞C")
print(f"Threshold alerts: {alerts}")</textarea>
                    <div class="code-output" id="outputcode29">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Factorial Calculation</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 11.2: Factorial</span>
                        <button class="code-figure-run" onclick="runCode('code30')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code30"># Calculate factorial: n! = n √ó (n-1) √ó ... √ó 1
n = 5
factorial = 1

for i in range(1, n + 1):
    factorial *= i
    print(f"{i}! = {factorial}")

print(f"\n{n}! = {factorial}")</textarea>
                    <div class="code-output" id="outputcode30">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Fibonacci Sequence</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 11.3: Fibonacci</span>
                        <button class="code-figure-run" onclick="runCode('code31')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code31"># Generate Fibonacci sequence
n_terms = 10
a, b = 0, 1

print(f"Fibonacci sequence ({n_terms} terms):")
for i in range(n_terms):
    print(a, end=" ")
    a, b = b, a + b
print()</textarea>
                    <div class="code-output" id="outputcode31">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Summary Box -->
            <div class="summary-box">
                <h3>üìã Week 3 Summary</h3>
                <div class="summary-grid">
                    <div class="summary-item"><span class="icon">üîÑ</span><span><code>for item in iterable</code></span></div>
                    <div class="summary-item"><span class="icon">üî¢</span><span><code>range(start, stop, step)</code></span></div>
                    <div class="summary-item"><span class="icon">‚è≥</span><span><code>while condition</code></span></div>
                    <div class="summary-item"><span class="icon">üîó</span><span><code>enumerate()</code>, <code>zip()</code></span></div>
                    <div class="summary-item"><span class="icon">üõë</span><span><code>break</code> - exit loop</span></div>
                    <div class="summary-item"><span class="icon">‚è≠Ô∏è</span><span><code>continue</code> - skip iteration</span></div>
                    <div class="summary-item"><span class="icon">üìä</span><span>Nested loops for 2D data</span></div>
                    <div class="summary-item"><span class="icon">üîç</span><span>Accumulator, Counter, Filter</span></div>
                </div>
            </div>

            <!-- Common Mistakes: Loops -->
            <section id="mistakes" class="section" style="scroll-margin-top: 70px;">
                <div class="section-header">
                    <div class="section-number" style="background: var(--danger);">‚ùå</div>
                    <h2>Common Mistakes to Avoid</h2>
                </div>
                <p>These are the most frequent errors students make with loops. Recognizing these patterns will save you hours of debugging!</p>
                
                <div class="danger-box">
                    <p><strong>Infinite <code>while</code> loops</strong><br>
                    Forgetting to update the loop variable: <code>while x < 10:</code> without <code>x += 1</code> inside runs forever! Always ensure the condition will eventually become <code>False</code>.</p>
                </div>
                <div class="danger-box">
                    <p><strong>Off-by-one with <code>range()</code></strong><br>
                    <code>range(1, 10)</code> gives 1‚Äì9, NOT 1‚Äì10. The end value is <em>exclusive</em>. For 1 through 10, use <code>range(1, 11)</code>.</p>
                </div>
                <div class="danger-box">
                    <p><strong>Modifying a list while iterating over it</strong><br>
                    <code>for item in my_list: my_list.remove(item)</code> ‚Üí Skips elements! Iterate over a copy instead: <code>for item in my_list[:]:</code></p>
                </div>
                <div class="danger-box">
                    <p><strong>Wrong placement of accumulator initialization</strong><br>
                    Placing <code>total = 0</code> INSIDE the loop resets it every iteration. Always initialize accumulators BEFORE the loop starts.</p>
                </div>
                <div class="danger-box">
                    <p><strong>Confusing <code>break</code> and <code>continue</code></strong><br>
                    <code>break</code> exits the loop entirely. <code>continue</code> skips to the next iteration. Mixing them up changes program behavior dramatically.</p>
                </div>
            </section>

            <!-- Exercises Section -->
            <section id="exercises" class="section">
                <div class="section-header">
                    <div class="section-number">üìù</div>
                    <h2>Practice Exercises</h2>
                </div>
                
                <p>Complete these 15 exercises to master loops in Python.</p>
                
                <!-- Exercise 1 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">1</span>Print 1 to 10</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Use a for loop to print numbers from 1 to 10, each on a new line.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>1
2
3
...
10</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints1')">üí° Show Hints</button>
                            <div class="hints-content" id="hints1">
                                <ul>
                                    <li>Use <code>range(1, 11)</code> to generate numbers 1-10</li>
                                    <li>Remember: range end value is exclusive</li>
                                    <li>Structure: <code>for i in range(1, 11):</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex1')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex1"># Print numbers 1 to 10

</textarea>
                            <div class="code-output" id="outputex1">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 2 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">2</span>Sum of List</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Calculate and print the sum of numbers = [5, 10, 15, 20, 25] using a for loop.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>Sum: 75</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints2')">üí° Show Hints</button>
                            <div class="hints-content" id="hints2">
                                <ul>
                                    <li>Create a variable <code>total = 0</code> before the loop</li>
                                    <li>Add each number: <code>total += num</code> or <code>total = total + num</code></li>
                                    <li>Print after the loop completes</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex2')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex2">numbers = [5, 10, 15, 20, 25]
# Calculate the sum

</textarea>
                            <div class="code-output" id="outputex2">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 3 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">3</span>Even Numbers</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Print all even numbers from 2 to 20 using range() with a step.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>2 4 6 8 10 12 14 16 18 20</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints3')">üí° Show Hints</button>
                            <div class="hints-content" id="hints3">
                                <ul>
                                    <li>Use <code>range(start, stop, step)</code> with step=2</li>
                                    <li>Example: <code>range(2, 21, 2)</code></li>
                                    <li>Print on same line: <code>print(n, end=" ")</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex3')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex3"># Print even numbers 2-20

</textarea>
                            <div class="code-output" id="outputex3">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 4 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">4</span>Count Vowels</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Count the number of vowels in text = "Engineering is fun!"</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>Vowel count: 6</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints4')">üí° Show Hints</button>
                            <div class="hints-content" id="hints4">
                                <ul>
                                    <li>Create a string with all vowels: "aeiouAEIOU"</li>
                                    <li>Loop through each character in text</li>
                                    <li>Check if character is in vowels string</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex4')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex4">text = "Engineering is fun!"
# Count vowels

</textarea>
                            <div class="code-output" id="outputex4">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 5 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">5</span>Multiplication Table</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Print the multiplication table for 5 (from 5√ó1 to 5√ó10).</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>5 x 1 = 5
5 x 2 = 10
...
5 x 10 = 50</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints5')">üí° Show Hints</button>
                            <div class="hints-content" id="hints5">
                                <ul>
                                    <li>Loop through <code>range(1, 11)</code></li>
                                    <li>Calculate result: <code>5 * i</code></li>
                                    <li>Format: <code>f"5 x {i} = {5 * i}"</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex5')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex5"># Multiplication table for 5

</textarea>
                            <div class="code-output" id="outputex5">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 6 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">6</span>Factorial</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Calculate the factorial of n = 6 (6! = 6√ó5√ó4√ó3√ó2√ó1).</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>6! = 720</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints6')">üí° Show Hints</button>
                            <div class="hints-content" id="hints6">
                                <ul>
                                    <li>Start with <code>factorial = 1</code></li>
                                    <li>Multiply by each number: <code>factorial *= i</code></li>
                                    <li>Loop from 1 to n: <code>range(1, n + 1)</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex6')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex6">n = 6
# Calculate factorial

</textarea>
                            <div class="code-output" id="outputex6">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 7 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">7</span>Find Maximum</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Find the maximum value in values = [23, 67, 12, 89, 45, 34] without using max().</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>Maximum: 89</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints7')">üí° Show Hints</button>
                            <div class="hints-content" id="hints7">
                                <ul>
                                    <li>Initialize <code>max_val = values[0]</code> (first element)</li>
                                    <li>Loop through list, compare each value</li>
                                    <li>If <code>val > max_val</code>, update <code>max_val = val</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex7')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex7">values = [23, 67, 12, 89, 45, 34]
# Find maximum without max()

</textarea>
                            <div class="code-output" id="outputex7">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 8 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">8</span>Countdown</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Create a countdown from 5 to 1 using a while loop, then print "Blast off!"</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>5
4
3
2
1
Blast off!</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints8')">üí° Show Hints</button>
                            <div class="hints-content" id="hints8">
                                <ul>
                                    <li>Start with <code>count = 5</code></li>
                                    <li>While condition: <code>while count > 0:</code></li>
                                    <li>Decrement: <code>count -= 1</code> inside loop</li>
                                    <li>Print "Blast off!" after the loop ends</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex8')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex8"># Countdown with while loop

</textarea>
                            <div class="code-output" id="outputex8">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 9 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">9</span>Filter Positives</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">From nums = [4, -2, 7, -5, 3, -1, 8], create a new list containing only positive numbers.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>Positives: [4, 7, 3, 8]</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints9')">üí° Show Hints</button>
                            <div class="hints-content" id="hints9">
                                <ul>
                                    <li>Create empty list: <code>positives = []</code></li>
                                    <li>Loop through nums, check <code>if num > 0:</code></li>
                                    <li>Append to list: <code>positives.append(num)</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex9')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex9">nums = [4, -2, 7, -5, 3, -1, 8]
# Filter positive numbers

</textarea>
                            <div class="code-output" id="outputex9">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 10 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">10</span>Star Triangle</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Print a right triangle of stars with 5 rows using nested loops.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>*
**
***
****
*****</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints10')">üí° Show Hints</button>
                            <div class="hints-content" id="hints10">
                                <ul>
                                    <li>Outer loop: <code>for i in range(1, 6):</code></li>
                                    <li>Print stars: <code>print("*" * i)</code></li>
                                    <li>Or use nested loop with inner <code>range(i)</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex10')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex10"># Print star triangle

</textarea>
                            <div class="code-output" id="outputex10">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 11 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">11</span>First Even with break</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Find and print the first even number in [5, 7, 9, 4, 11, 2] using break.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>First even: 4</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints11')">üí° Show Hints</button>
                            <div class="hints-content" id="hints11">
                                <ul>
                                    <li>Loop through numbers with <code>for num in numbers:</code></li>
                                    <li>Check even: <code>if num % 2 == 0:</code></li>
                                    <li>Print and then <code>break</code> to exit loop</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex11')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex11">numbers = [5, 7, 9, 4, 11, 2]
# Find first even using break

</textarea>
                            <div class="code-output" id="outputex11">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 12 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">12</span>Skip Negatives</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Print only positive numbers from [1, -2, 3, -4, 5] using continue.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>1 3 5</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints12')">üí° Show Hints</button>
                            <div class="hints-content" id="hints12">
                                <ul>
                                    <li>Check if negative: <code>if num < 0:</code></li>
                                    <li>Use <code>continue</code> to skip negative numbers</li>
                                    <li>Print on same line: <code>print(num, end=" ")</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex12')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex12">numbers = [1, -2, 3, -4, 5]
# Print positives using continue

</textarea>
                            <div class="code-output" id="outputex12">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 13 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">13</span>Fibonacci</div>
                        <span class="difficulty hard">Challenge</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Generate the first 8 Fibonacci numbers: 0, 1, 1, 2, 3, 5, 8, 13</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>0 1 1 2 3 5 8 13</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints13')">üí° Show Hints</button>
                            <div class="hints-content" id="hints13">
                                <ul>
                                    <li>Start with a=0, b=1</li>
                                    <li>Each new number is a+b</li>
                                    <li>Swap: a, b = b, a + b</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex13')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex13"># Generate first 8 Fibonacci numbers

</textarea>
                            <div class="code-output" id="outputex13">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 14 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">14</span>enumerate() Practice</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Use enumerate() to print each item in ["apple", "banana", "cherry"] with its position starting from 1.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>1. apple
2. banana
3. cherry</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints14')">üí° Show Hints</button>
                            <div class="hints-content" id="hints14">
                                <ul>
                                    <li>Use <code>enumerate(fruits, start=1)</code> to start from 1</li>
                                    <li>Unpack: <code>for i, fruit in enumerate(...):</code></li>
                                    <li>Format: <code>f"{i}. {fruit}"</code></li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex14')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex14">fruits = ["apple", "banana", "cherry"]
# Use enumerate with start=1

</textarea>
                            <div class="code-output" id="outputex14">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                
                <!-- Exercise 15 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">15</span>Prime Numbers</div>
                        <span class="difficulty hard">Challenge</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                        <p class="exercise-description">Print all prime numbers between 1 and 30.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>Prime numbers 1-30: 2 3 5 7 11 13 17 19 23 29</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints15')">üí° Show Hints</button>
                            <div class="hints-content" id="hints15">
                                <ul>
                                    <li>A prime has no divisors except 1 and itself</li>
                                    <li>Check divisibility from 2 to ‚àön</li>
                                    <li>Use nested loop with break</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex15')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex15"># Print primes 1-30

</textarea>
                            <div class="code-output" id="outputex15">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- Bridge Exercise ‚Üí Week 4 -->
                <div class="exercise-card" style="border: 2px solid rgba(217, 119, 6, 0.35); background: linear-gradient(135deg, rgba(217,119,6,0.04), transparent);">
                    <div class="exercise-header" style="background: linear-gradient(135deg, rgba(217,119,6,0.12), rgba(217,119,6,0.04));">
                        <div class="exercise-title"><span class="exercise-number" style="background: linear-gradient(135deg, #d97706, #f59e0b);">üåâ</span>Bridge Exercise: Sneak Peek at Week 4</div>
                        <span class="difficulty medium">Preview</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                            <p class="exercise-description"><strong>Next week: Functions!</strong> Notice how this program repeats the same Celsius-to-Fahrenheit conversion logic 3 times. What if we could name a block of code and call it whenever needed?</p>
                            <div class="expected-output">
                                <div class="expected-output-label">‚úì Expected Output</div>
                                <pre>Sensor 1: 25.5¬∞C = 77.9¬∞F
Sensor 2: 30.2¬∞C = 86.4¬∞F
Sensor 3: -5.0¬∞C = 23.0¬∞F

Same formula written 3 times!
Next week: def celsius_to_fahrenheit(temp) ‚Äî write once, use anywhere!</pre>
                            </div>
                            <div class="hints-container">
                                <button class="hints-toggle" onclick="toggleHints('hintsBridge')">üí° Show Hints</button>
                                <div class="hints-content" id="hintsBridge">
                                    <ul>
                                        <li>The formula is <code>(celsius * 9/5) + 32</code></li>
                                        <li>Notice we wrote the same formula 3 times ‚Äî if it were wrong, we'd fix it in 3 places!</li>
                                        <li>Next week: <code>def convert(temp):</code> ‚Äî write once, call as many times as you want</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Bridge Exercise ‚Äî Preview of Week 4: Functions</span>
                                <button class="code-figure-run" onclick="runCode('exBridge')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="exBridge"># Bridge Exercise: Repetitive Calculations
# Converting Celsius to Fahrenheit ‚Äî repeated 3 times!

# Sensor 1
temp_c1 = 25.5
temp_f1 = (temp_c1 * 9/5) + 32
print(f"Sensor 1: {temp_c1}¬∞C = {temp_f1}¬∞F")

# Sensor 2 ‚Äî same formula again!
temp_c2 = 30.2
temp_f2 = (temp_c2 * 9/5) + 32
print(f"Sensor 2: {temp_c2}¬∞C = {temp_f2}¬∞F")

# Sensor 3 ‚Äî and again!
temp_c3 = -5.0
temp_f3 = (temp_c3 * 9/5) + 32
print(f"Sensor 3: {temp_c3}¬∞C = {temp_f3}¬∞F")

# THINK: We wrote the same formula 3 times.
# What if the formula was wrong? Fix in 3 places!
print("\nSame formula written 3 times!")
print("Next week: def celsius_to_fahrenheit(temp) ‚Äî write once, use anywhere!")
</textarea>
                            <div class="code-output" id="outputexBridge">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="tip-box info-box">
                    <p>When you see the same code repeated, that's a signal you need a <strong>function</strong>. Next week you'll learn to write <code>def convert(temp):</code> and call it as many times as you want ‚Äî no more copy-paste!</p>
                </div>
            </section>

            <!-- Submit Section -->
            <section id="submit" class="section">
                <div class="section-header">
                    <div class="section-number">üì§</div>
                    <h2>Submit Your Work</h2>
                </div>
                
                <div class="submit-section">
                    <h2>üìã Submission Form</h2>
                    <p>Complete the exercises above, then fill out this form to record your attendance and participation.</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Student ID</label>
                            <input type="text" id="studentId" placeholder="e.g., 2024001234" maxlength="10">
                        </div>
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="studentName" placeholder="e.g., Ahmet Yƒ±lmaz">
                        </div>
                        <div class="form-group">
                            <label>Email (@istun.edu.tr)</label>
                            <input type="email" id="studentEmail" placeholder="e.g., ahmet.yilmaz@istun.edu.tr">
                        </div>
                        <div class="form-group">
                            <label>Class Code (from instructor)</label>
                            <input type="text" id="classCode" placeholder="Enter code from class">
                        </div>
                    </div>
                    
                    <div class="honeypot">
                        <input type="text" id="website" tabindex="-1" autocomplete="off">
                    </div>
                    
                    <button class="submit-btn" onclick="submitWork()">Submit Week 03</button>
                    
                    <div class="submit-status" id="submitStatus"></div>
                </div>
            </section>
            
            <!-- Navigation -->
            <nav class="week-nav">
                <a class="nav-prev" href="Week_02.html">
                    <span class="nav-direction">‚Üê Previous</span>
                    <span class="nav-title">Week 02: Control Flow</span>
                </a>
                <a class="nav-next" href="Week_04.html">
                    <span class="nav-direction">Next ‚Üí</span>
                    <span class="nav-title">Week 04: Functions</span>
                </a>
            </nav>
        </div>
    </div>
    
    <script>
        // Convert inline code figures (not exercises) to split layout
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.code-figure').forEach(figure => {
                if (figure.closest('.exercise-code-panel')) return;
                const editor = figure.querySelector('.code-editor');
                const output = figure.querySelector('.code-output');
                if (editor && output) {
                    const splitDiv = document.createElement('div');
                    splitDiv.className = 'code-split';
                    editor.parentNode.insertBefore(splitDiv, editor);
                    splitDiv.appendChild(editor);
                    splitDiv.appendChild(output);
                }
            });
        });
        
        // Hints toggle
        function toggleHints(id) {
            const hints = document.getElementById(id);
            hints.classList.toggle('show');
            const btn = hints.previousElementSibling;
            btn.textContent = hints.classList.contains('show') ? 'üí° Hide Hints' : 'üí° Show Hints';
        }
        
        // ============ PYODIDE CODE RUNNER ============
        let pyodideReady = false;
        let pyodide = null;
        
        async function runCode(codeId) {
            const codeEl = document.getElementById(codeId);
            const outputEl = document.getElementById('output' + codeId);
            const code = codeEl.value;
            outputEl.classList.add('show');
            let success = true;
            
            const outputContent = outputEl.querySelector('.code-output-content') || outputEl;
            
            if (!pyodideReady) {
                outputContent.textContent = 'Initializing Python (first run takes a few seconds)...';
                try {
                    pyodide = await loadPyodide();
                    pyodideReady = true;
                } catch (e) {
                    outputContent.textContent = 'Error loading Python: ' + e.message;
                    return false;
                }
            }
            
            outputContent.textContent = 'Running...';
            
            try {
                pyodide.runPython(`
import sys
from io import StringIO
sys.stdout = StringIO()
`);
                await pyodide.runPythonAsync(code);
                const output = pyodide.runPython(`sys.stdout.getvalue()`);
                outputContent.textContent = output || '(no output)';
            } catch (e) {
                outputContent.textContent = 'Error: ' + e.message;
                success = false;
            }
            return success;
        }

        // ============ RUN ALL CODE BLOCKS ============
        async function runAllCode() {
            const btn = document.getElementById('runAllBtn');
            btn.className = 'run-all-btn running';
            btn.textContent = '‚è≥ Running...';

            const allCodeBlocks = document.querySelectorAll('.code-editor[id^="code"]');
            let passed = 0, failed = 0, total = allCodeBlocks.length;
            const failedListings = [];
            let firstFailedFigure = null;

            document.querySelectorAll('.code-run-status').forEach(el => el.remove());

            for (const ta of allCodeBlocks) {
                const codeId = ta.id;
                const figure = ta.closest('.code-figure');
                const header = figure.querySelector('.code-figure-header');
                const label = header ? header.querySelector('.code-figure-label') : null;

                const status = document.createElement('span');
                status.className = 'code-run-status';
                if (header) header.appendChild(status);

                try {
                    const ok = await runCode(codeId);
                    if (ok) {
                        status.textContent = '‚úì';
                        status.classList.add('pass', 'visible');
                        passed++;
                    } else {
                        const listingName = label ? label.textContent.trim() : codeId;
                        status.textContent = '‚úó error';
                        status.classList.add('fail', 'visible');
                        failedListings.push(listingName);
                        if (!firstFailedFigure) firstFailedFigure = figure;
                        failed++;
                    }
                } catch (e) {
                    const listingName = label ? label.textContent.trim() : codeId;
                    status.textContent = '‚úó error';
                    status.classList.add('fail', 'visible');
                    failedListings.push(listingName);
                    if (!firstFailedFigure) firstFailedFigure = figure;
                    failed++;
                }
            }

            if (failed === 0) {
                btn.className = 'run-all-btn success';
                btn.textContent = `‚úì All ${passed} passed`;
            } else {
                btn.className = 'run-all-btn failure';
                btn.textContent = `‚úó ${failed}/${total} failed`;
                if (firstFailedFigure) {
                    firstFailedFigure.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstFailedFigure.style.outline = '2px solid #f87171';
                    firstFailedFigure.style.outlineOffset = '4px';
                    firstFailedFigure.style.borderRadius = '8px';
                    setTimeout(() => { firstFailedFigure.style.outline = 'none'; }, 5000);
                }
            }

            setTimeout(() => {
                btn.className = 'run-all-btn';
                btn.textContent = '‚ñ∂ Run All';
            }, 10000);
        }

        // ============ SMART TOC ============
        const sections = [
            { id: 'recap',     label: 'üß† Recap Quiz: Week 2' },
            { id: 'part1',     label: 'Introduction to Loops' },
            { id: 'part2',     label: 'The for Loop' },
            { id: 'part3',     label: 'The range() Function' },
            { id: 'part4',     label: 'Iterating Over Collections' },
            { id: 'part5',     label: 'enumerate() and zip()' },
            { id: 'part6',     label: 'The while Loop' },
            { id: 'part7',     label: 'The break Statement' },
            { id: 'part8',     label: 'The continue Statement' },
            { id: 'part9',     label: 'Nested Loops' },
            { id: 'part10',    label: 'Common Loop Patterns' },
            { id: 'part11',    label: 'Engineering Applications' },
            { id: 'mistakes',  label: '‚ùå Common Mistakes' },
            { id: 'exercises', label: 'Practice Exercises' },
            { id: 'submit',    label: 'Submit Your Work' }
        ];

        const visited = new Set();
        let currentIdx = 0;

        const dropdown = document.getElementById('tocDropdown');
        sections.forEach((s, i) => {
            const a = document.createElement('a');
            a.className = 'toc-item';
            a.href = '#' + s.id;
            a.innerHTML = `<span class="toc-num">${i + 1}.</span> ${s.label} <span class="toc-check">‚úì</span>`;
            a.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById(s.id).scrollIntoView({ behavior: 'smooth' });
                document.getElementById('tocCenter').classList.remove('open');
            });
            dropdown.appendChild(a);
        });

        document.addEventListener('click', (e) => {
            const toc = document.getElementById('tocCenter');
            if (!toc.contains(e.target)) toc.classList.remove('open');
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const idx = sections.findIndex(s => s.id === entry.target.id);
                    if (idx !== -1) {
                        currentIdx = idx;
                        visited.add(idx);
                        updateTOC();
                    }
                }
            });
        }, { rootMargin: '-20% 0px -60% 0px' });

        sections.forEach(s => {
            const el = document.getElementById(s.id);
            if (el) observer.observe(el);
        });

        function updateTOC() {
            document.getElementById('tocCurNum').textContent = (currentIdx + 1) + '.';
            document.getElementById('tocCurLabel').textContent = sections[currentIdx].label;
            dropdown.querySelectorAll('.toc-item').forEach((item, i) => {
                item.classList.toggle('active', i === currentIdx);
                if (visited.has(i)) item.classList.add('visited');
            });
        }

        // Scroll progress
        const C = 2 * Math.PI * 19;
        window.addEventListener('scroll', () => {
            const h = document.documentElement.scrollHeight - window.innerHeight;
            const pct = h > 0 ? Math.min(window.scrollY / h, 1) : 0;
            document.getElementById('topbarProgress').style.width = (pct * 100) + '%';
            const badge = document.getElementById('scrollProgress');
            badge.classList.toggle('visible', window.scrollY > 200);
            document.getElementById('scrollPct').textContent = Math.round(pct * 100) + '%';
            document.getElementById('scrollCircle').style.strokeDashoffset = C * (1 - pct);
        });

        // Auto-size code blocks
        function initAutoSize() {
            document.querySelectorAll('.code-split .code-editor').forEach(ta => {
                const sizer = document.createElement('div');
                sizer.className = 'code-input-sizer';
                ta.parentNode.insertBefore(sizer, ta);
                sizer.appendChild(ta);

                const mirror = document.createElement('div');
                mirror.className = 'code-input-mirror';
                mirror.setAttribute('aria-hidden', 'true');
                sizer.appendChild(mirror);

                function sync() { mirror.textContent = ta.value + '\n'; }
                ta.addEventListener('input', sync);
                sync();
            });
        }
        function autoSizeCodeBlock() {}
        if (document.fonts) { document.fonts.ready.then(initAutoSize); }
        else { window.addEventListener('load', initAutoSize); }
        
        // Form validation and submission
        const pageLoadTime = Date.now();
        
        // ============ ANTI-CHEAT SYSTEM ============
        // Store original/default code for each exercise
        const originalExerciseCode = {};
        // Track keystroke counts per exercise
        const keystrokeCounts = {};
        // Track if paste was attempted
        const pasteAttempts = {};
        
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.code-editor[id^="ex"]').forEach(textarea => {
                const exId = textarea.id;
                
                // Store original code
                originalExerciseCode[exId] = textarea.value;
                keystrokeCounts[exId] = 0;
                pasteAttempts[exId] = 0;
                
                // Block paste
                textarea.addEventListener('paste', function(e) {
                    e.preventDefault();
                    pasteAttempts[exId]++;
                    // Show warning
                    const warning = document.createElement('div');
                    warning.textContent = '‚ö†Ô∏è Paste is disabled. Please type your code.';
                    warning.style.cssText = 'color:#f87171;font-size:12px;margin-top:5px;';
                    warning.className = 'paste-warning';
                    // Remove existing warning if any
                    const existingWarning = textarea.parentElement.querySelector('.paste-warning');
                    if (existingWarning) existingWarning.remove();
                    textarea.parentElement.appendChild(warning);
                    // Auto-remove warning after 3 seconds
                    setTimeout(() => warning.remove(), 3000);
                });
                
                // Block drag & drop
                textarea.addEventListener('drop', function(e) {
                    e.preventDefault();
                });
                
                // Count keystrokes (only actual typing keys)
                textarea.addEventListener('keydown', function(e) {
                    // Count printable characters, backspace, delete, enter, tab
                    if (e.key.length === 1 || ['Backspace', 'Delete', 'Enter', 'Tab'].includes(e.key)) {
                        keystrokeCounts[exId]++;
                    }
                });
            });
        });
        
        // Check if code was actually modified by student (with meaningful effort)
        function isCodeModified(exId, currentCode) {
            const original = originalExerciseCode[exId] || '';
            const keystrokes = keystrokeCounts[exId] || 0;
            
            // Normalize whitespace for comparison
            const normalizedOriginal = original.trim().replace(/\s+/g, ' ');
            const normalizedCurrent = currentCode.trim().replace(/\s+/g, ' ');
            
            // Must be different from original
            if (normalizedOriginal === normalizedCurrent) return false;
            
            // Must have typed at least 20 keystrokes (prevents minimal changes)
            if (keystrokes < 20) return false;
            
            // Remove comments and check if anything substantial remains
            const withoutComments = currentCode.replace(/#.*$/gm, '').replace(/"""[\s\S]*?"""/g, '').replace(/'''[\s\S]*?'''/g, '').trim();
            const originalWithoutComments = original.replace(/#.*$/gm, '').replace(/"""[\s\S]*?"""/g, '').replace(/'''[\s\S]*?'''/g, '').trim();
            
            // Must have added meaningful code (not just modified comments)
            if (withoutComments.length <= originalWithoutComments.length + 10) return false;
            
            return true;
        }
        // ============ END ANTI-CHEAT ============
        
        function validateStudentId(id) {

            if (id.length < 6 || id.length > 10) return false;
            if (!/^\d+$/.test(id)) return false;
            if (/^(\d)\1+$/.test(id)) return false;
            return true;
        }
        
        function validateName(name) {
            if (name.length < 5) return false;
            const words = name.trim().split(/\s+/);
            if (words.length < 2) return false;
            if (!/^[A-Za-zƒü√º≈üƒ±√∂√ßƒû√ú≈ûƒ∞√ñ√á\s]+$/.test(name)) return false;
            return true;
        }
        
        function validateEmail(email) {
            return email.endsWith('@istun.edu.tr') && email.length > 15;
        }
        
        async function submitWork() {
            const status = document.getElementById('submitStatus');
            status.style.display = 'none';
            
            const studentId = document.getElementById('studentId').value.trim();
            const studentName = document.getElementById('studentName').value.trim();
            const studentEmail = document.getElementById('studentEmail').value.trim().toLowerCase();
            const classCode = document.getElementById('classCode').value.trim().toUpperCase();
            const honeypot = document.getElementById('website').value;
            
            // Bot check
            if (honeypot) {
                status.textContent = '‚ùå Submission rejected.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Time check
            const timeOnPage = Math.floor((Date.now() - pageLoadTime) / 1000);
            if (timeOnPage < 60) {
                status.textContent = '‚ùå Please spend more time reviewing the material.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Required fields
            if (!studentId || !studentName || !studentEmail || !classCode) {
                status.textContent = '‚ùå All fields are required.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate student ID
            if (!validateStudentId(studentId)) {
                status.textContent = '‚ùå Invalid Student ID (must be 6-10 digits).';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate name
            if (!validateName(studentName)) {
                status.textContent = '‚ùå Please enter your full name (first and last).';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate email
            if (!validateEmail(studentEmail)) {
                status.textContent = '‚ùå Please use your @istun.edu.tr email.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate class code
            if (classCode.length < 4) {
                status.textContent = '‚ùå Invalid class code.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            status.textContent = '‚è≥ Collecting answers and submitting...';
            status.style.cssText = 'display:block;background:rgba(124,58,237,0.2);color:#a78bfa';
            
            // Collect all exercise answers with anti-cheat data
            const answers = {};
            const exerciseCards = document.querySelectorAll('.exercise-card');
            exerciseCards.forEach((card, index) => {
                const exNum = index + 1;
                const titleEl = card.querySelector('.exercise-title');
                const descEl = card.querySelector('.exercise-description');
                const codeEl = card.querySelector('.code-editor[id^="ex"]');
                
                if (codeEl) {
                    const exId = codeEl.id;
                    const code = codeEl.value || '';
                    const wasModified = isCodeModified(exId, code);
                    
                    answers[exId] = {
                        title: titleEl ? titleEl.textContent.replace(/^\d+/, '').trim() : 'Exercise ' + exNum,
                        description: descEl ? descEl.textContent.trim() : '',
                        code: code,
                        modified: wasModified,
                        keystrokes: keystrokeCounts[exId] || 0,
                        pasteAttempts: pasteAttempts[exId] || 0
                    };
                }
            });

            
            // Fetch IP and location
            let ipAddress = 'Unknown';
            let location = 'Unknown';
            try {
                const ipResponse = await fetch('https://ipapi.co/json/', { timeout: 5000 });
                if (ipResponse.ok) {
                    const ipData = await ipResponse.json();
                    ipAddress = ipData.ip || 'Unknown';
                    location = (ipData.city && ipData.country_name) 
                        ? `${ipData.city}, ${ipData.country_name}` 
                        : (ipData.country_name || 'Unknown');
                }
            } catch (e) {
                console.log('Could not fetch IP info');
            }
            
            const data = {
                week: 'Week_03',
                studentId: studentId,
                studentName: studentName,
                studentEmail: studentEmail,
                classCode: classCode,
                timeOnPage: timeOnPage,
                source: 'cp2-web',
                answers: answers,
                ipAddress: ipAddress,
                location: location
            };
            
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbyf1D3HGSAX4MoIhNlAuWlGrFyyvbM5MIv7ZsLxrVDlATUihrRGEAaibvIZYlCfd8Me/exec';
            
            fetch(scriptUrl, {
                method: 'POST',
                mode: 'cors',
                headers: { 'Content-Type': 'text/plain' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    status.textContent = '‚úÖ ' + result.message + ' Check your email for confirmation with your submitted answers.';
                    status.style.cssText = 'display:block;background:rgba(5,150,105,0.2);color:#6ee7b7';
                } else {
                    status.textContent = '‚ùå ' + result.message;
                    status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                }
            })
            .catch(error => {
                fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify(data)
                })
                .then(() => {
                    status.textContent = '‚ö†Ô∏è Request sent. Check your email for confirmation.';
                    status.style.cssText = 'display:block;background:rgba(217,119,6,0.2);color:#fcd34d';
                })
                .catch(() => {
                    status.textContent = '‚ùå Connection error. Please try again.';
                    status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                });
            });
        }
    </script>
</body>
</html>
