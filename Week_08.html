<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 08: File Handling | Computer Programming II</title>
    
    <!-- Pyodide for Python execution -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-cream: #faf9f7;
            --bg-dark: #1a1a2e;
            --bg-code: #1e1e2e;
            --text-primary: #1a1a2e;
            --text-secondary: #444;
            --text-muted: #666;
            --accent: #7c3aed;
            --accent-light: rgba(124, 58, 237, 0.1);
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --border: #e5e5e5;
            --card-bg: #ffffff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Crimson Pro', Georgia, serif; font-size: 19px; line-height: 1.8; background: var(--bg-cream); color: var(--text-primary); }
        /* Topbar */
        .topbar { background: var(--bg-dark); color: white; padding: 0 20px; height: 48px; position: sticky; top: 0; z-index: 100; display: flex; align-items: center; justify-content: space-between; }
        .topbar a { color: white; text-decoration: none; font-family: system-ui, sans-serif; font-size: 0.85rem; opacity: 0.85; transition: opacity 0.2s; }
        .topbar a:hover { opacity: 1; }
        .home-link { white-space: nowrap; }
        .topbar-right { display: flex; align-items: center; gap: 16px; font-family: system-ui, sans-serif; font-size: 0.82rem; }
        .topbar-progress { position: absolute; bottom: 0; left: 0; height: 2px; background: linear-gradient(90deg, var(--accent), #a78bfa); transition: width 0.15s ease-out; border-radius: 0 1px 1px 0; }
        .topbar-toc-center { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); }
        .topbar-toc-current { display: flex; align-items: center; gap: 6px; cursor: pointer; padding: 4px 14px; border-radius: 6px; transition: background 0.2s; font-family: system-ui, sans-serif; font-size: 0.82rem; color: rgba(255,255,255,0.9); user-select: none; }
        .topbar-toc-current:hover { background: rgba(255,255,255,0.08); }
        .topbar-toc-current .cur-num { opacity: 0.5; margin-right: 2px; }
        .topbar-toc-current .cur-label { max-width: 220px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .topbar-toc-current .cur-arrow { font-size: 0.6rem; opacity: 0.5; transition: transform 0.2s; }
        .topbar-toc-center.open .cur-arrow { transform: rotate(180deg); }
        .topbar-toc-dropdown { display: none; position: absolute; top: calc(100% + 8px); left: 50%; transform: translateX(-50%); background: var(--bg-dark); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; min-width: 300px; max-height: 70vh; overflow-y: auto; padding: 8px 0; box-shadow: 0 12px 40px rgba(0,0,0,0.4); }
        .topbar-toc-center.open .topbar-toc-dropdown { display: block; }
        .toc-item { display: flex; align-items: center; gap: 10px; padding: 8px 18px; font-family: system-ui, sans-serif; font-size: 0.82rem; color: rgba(255,255,255,0.6); cursor: pointer; transition: all 0.15s; text-decoration: none; }
        .toc-item:hover { background: rgba(255,255,255,0.06); color: #fff; }
        .toc-item.active { color: #a78bfa; font-weight: 600; }
        .toc-item.visited .toc-check { opacity: 1; color: #4ade80; }
        .toc-num { opacity: 0.4; min-width: 22px; }
        .toc-check { opacity: 0; font-size: 0.7rem; margin-left: auto; transition: opacity 0.3s; }
        .scroll-progress { position: fixed; bottom: 20px; right: 20px; width: 44px; height: 44px; border-radius: 50%; background: var(--bg-dark); display: flex; align-items: center; justify-content: center; font-family: system-ui, sans-serif; font-size: 0.7rem; font-weight: 600; color: rgba(255,255,255,0.9); box-shadow: 0 4px 16px rgba(0,0,0,0.2); z-index: 90; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .scroll-progress.visible { opacity: 1; }
        .scroll-progress svg { position: absolute; top: 0; left: 0; width: 44px; height: 44px; transform: rotate(-90deg); }
        .scroll-progress circle { fill: none; stroke-width: 3; }
        .scroll-progress .bg { stroke: rgba(255,255,255,0.1); }
        .scroll-progress .fg { stroke: var(--accent); stroke-linecap: round; transition: stroke-dashoffset 0.15s ease-out; }
        .run-all-btn { background: transparent; color: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.2); padding: 4px 14px; border-radius: 4px; font-family: system-ui, sans-serif; font-size: 0.75rem; cursor: pointer; transition: all 0.2s; white-space: nowrap; margin-left: 10px; }
        .run-all-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }
        .run-all-btn.running { color: #a78bfa; border-color: rgba(124,58,237,0.4); pointer-events: none; }
        .run-all-btn.success { color: #4ade80; border-color: rgba(74,222,128,0.4); background: rgba(74,222,128,0.1); }
        .run-all-btn.failure { color: #f87171; border-color: rgba(248,113,113,0.4); background: rgba(248,113,113,0.1); }
        .code-run-status { display: inline-flex; align-items: center; gap: 5px; font-family: system-ui, sans-serif; font-size: 0.7rem; margin-left: 10px; opacity: 0; transition: opacity 0.3s; }
        .code-run-status.visible { opacity: 1; }
        .code-run-status.pass { color: #4ade80; }
        .code-run-status.fail { color: #f87171; }
        .container { max-width: 1100px; margin: 0 auto; padding: 50px 24px 80px; }
        .chapter-header { text-align: center; margin-bottom: 50px; padding-bottom: 40px; border-bottom: 2px solid var(--border); }
        .chapter-label { display: inline-block; background: var(--accent); color: white; padding: 6px 18px; border-radius: 20px; font-size: 0.85rem; font-family: system-ui, sans-serif; font-weight: 500; margin-bottom: 20px; }
        .chapter-header h1 { font-size: 2.8rem; font-weight: 700; color: var(--text-primary); margin-bottom: 16px; }
        .chapter-meta { display: flex; justify-content: center; gap: 30px; color: var(--text-muted); font-size: 1rem; }
        .objectives-box { background: linear-gradient(135deg, var(--accent-light), rgba(124, 58, 237, 0.05)); border: 1px solid rgba(124, 58, 237, 0.2); border-left: 4px solid var(--accent); border-radius: 8px; padding: 28px; margin-bottom: 50px; }
        .objectives-box h3 { font-size: 1.2rem; margin-bottom: 16px; color: var(--accent); }
        .objectives-box ul { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 10px 30px; list-style: none; }
        .objectives-box li { color: var(--text-secondary); font-size: 0.95rem; padding-left: 28px; position: relative; }
        .objectives-box li::before { content: '‚úì'; position: absolute; left: 0; color: var(--success); font-weight: bold; }
        .section { margin-bottom: 60px; scroll-margin-top: 70px; }
        .section-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid var(--border); }
        .section-number { display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; background: var(--accent); color: white; border-radius: 10px; font-size: 1.2rem; font-weight: 700; font-family: system-ui, sans-serif; }
        .section-header h2 { font-size: 1.6rem; font-weight: 600; color: var(--text-primary); }
        .content p { color: var(--text-secondary); margin-bottom: 18px; }
        .content h3 { font-size: 1.25rem; font-weight: 600; margin: 35px 0 16px; color: var(--text-primary); }
        .content h4 { font-size: 1.1rem; font-weight: 600; margin: 25px 0 12px; color: var(--accent); }
        .content ul, .content ol { color: var(--text-secondary); margin: 16px 0 20px 28px; }
        .content li { margin-bottom: 8px; }
        code { font-family: 'JetBrains Mono', monospace; background: rgba(124, 58, 237, 0.1); padding: 2px 8px; border-radius: 4px; font-size: 0.85em; color: var(--accent); }
        .code-figure { background: var(--bg-code); border-radius: 10px; margin: 20px 0; overflow: hidden; border: 1px solid #333; }
        .code-figure-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 16px; background: rgba(255,255,255,0.05); border-bottom: 1px solid #333; }
        .code-figure-label { font-family: system-ui, sans-serif; font-size: 0.8rem; color: #a78bfa; font-weight: 500; }
        .code-figure-run { background: var(--success); color: white; border: none; padding: 6px 14px; border-radius: 6px; font-family: system-ui, sans-serif; font-size: 0.8rem; font-weight: 600; cursor: pointer; }
        .code-figure-run:hover { background: #047857; }
        .code-editor { width: 100%; min-height: 80px; max-height: 300px; padding: 16px; background: var(--bg-code); border: none; color: #e4e4e7; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; line-height: 1.6; resize: vertical; outline: none; overflow-y: auto; }
        .code-output { background: rgba(5, 150, 105, 0.1); border-top: 1px solid #333; padding: 14px 16px; display: none; max-height: 200px; overflow-y: auto; }
        .code-output.show { display: block; }
        .code-output-label { font-family: system-ui, sans-serif; font-size: 0.75rem; font-weight: 600; color: var(--success); text-transform: uppercase; margin-bottom: 8px; }
        .code-output-content { font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: #d4d4d8; white-space: pre-wrap; }
        
        .code-figure .code-split { display: flex; flex-direction: row; align-items: stretch; border-radius: 0 0 4px 4px; }
        .code-figure .code-split .code-input-sizer { flex: 1 1 50%; min-width: 0; display: grid; border-right: 1px solid #28283c; background: #1e1e2e; }
        .code-figure .code-split .code-input-sizer > textarea,
        .code-figure .code-split .code-input-sizer > .code-input-mirror { grid-area: 1 / 1; font-size: 0.82rem; line-height: 1.7; padding: 14px 16px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: 'JetBrains Mono', monospace; min-height: 60px; }
        .code-figure .code-split .code-input-sizer > textarea { resize: none; overflow: hidden; color: #e0e0e0; background: transparent; border: none; outline: none; z-index: 1; max-height: none; }
        .code-figure .code-split .code-input-sizer > .code-input-mirror { visibility: hidden; pointer-events: none; }
        .code-figure .code-split .code-output { flex: 1 1 50%; min-width: 0; border-top: none; display: block; overflow-y: auto; padding: 0; box-sizing: border-box; max-height: none; }
        .code-figure .code-split .code-output .code-output-label { display: none; }
        .code-figure .code-split .code-output .code-output-content { font-size: 0.82rem; line-height: 1.7; padding: 14px 16px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: 'JetBrains Mono', monospace; min-height: 60px; }
        .code-figure .code-split .code-output.show { display: block; opacity: 1; }
        .code-figure .code-split .code-output:not(.show) { display: block; opacity: 0.4; }
        .code-figure .code-split .code-output:not(.show) .code-output-content::before { content: '\2190 Click \25b6 Run to see aligned output'; color: #555; font-style: italic; }
        
        .exercise-body { padding: 0 !important; display: grid; grid-template-columns: 1fr 1fr; min-height: 280px; }
        .exercise-info-panel { padding: 24px; border-right: 1px solid var(--border); overflow-y: auto; max-height: 450px; background: rgba(249,115,22,0.02); }
        .exercise-info-panel .exercise-description { margin-bottom: 16px; }
        .exercise-info-panel .expected-output { margin: 12px 0 16px; }
        .exercise-info-panel .hints-container { margin-top: 12px; }
        .exercise-code-panel { display: flex; flex-direction: column; }
        .exercise-code-panel .code-figure { margin: 0; border: none; border-radius: 0; flex: 1; display: flex; flex-direction: column; }
        .exercise-code-panel .code-figure-header { border-radius: 0; }
        .exercise-code-panel .code-editor { flex: 1; min-height: 150px; max-height: none; resize: none; }
        .exercise-code-panel .code-output { max-height: 180px; }
        .exercise-code-panel .code-figure-caption { border-top: 1px solid #28283c; }

        @media (max-width: 900px) {
            .exercise-body { grid-template-columns: 1fr; }
            .exercise-info-panel { border-right: none; border-bottom: 1px solid var(--border); max-height: none; }
            .code-figure .code-split { flex-direction: column; }
            .code-figure .code-split .code-input-sizer { flex: none; width: 100%; border-right: none; border-bottom: 1px solid #28283c; }
            .code-figure .code-split .code-output { flex: none; width: 100%; }
        }
        .info-box { padding: 18px 24px; border-radius: 8px; margin: 24px 0; border-left: 4px solid; }
        .info-box p { margin: 0; color: var(--text-secondary); font-size: 0.95rem; }
        .tip-box { background: rgba(5, 150, 105, 0.08); border-color: var(--success); }
        .tip-box::before { content: 'üí° Tip'; display: block; font-weight: 600; color: var(--success); margin-bottom: 8px; font-size: 0.9rem; }
        .warning-box { background: rgba(217, 119, 6, 0.08); border-color: var(--warning); }
        .warning-box::before { content: '‚ö†Ô∏è Important'; display: block; font-weight: 600; color: var(--warning); margin-bottom: 8px; font-size: 0.9rem; }
        .table-container { overflow-x: auto; margin: 24px 0; border-radius: 10px; border: 1px solid var(--border); }
        table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
        th { background: var(--bg-dark); color: white; padding: 14px 18px; text-align: left; font-weight: 600; font-family: system-ui, sans-serif; }
        td { padding: 14px 18px; border-bottom: 1px solid var(--border); color: var(--text-secondary); }
        tr:last-child td { border-bottom: none; }
        .exercise-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; margin: 28px 0; overflow: hidden; }
        .exercise-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 24px; background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(124, 58, 237, 0.05)); border-bottom: 1px solid var(--border); }
        .exercise-title { font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 12px; }
        .exercise-number { background: linear-gradient(135deg, #7c3aed, #7c3aed); color: white; width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; font-weight: 700; font-family: system-ui, sans-serif; }
        .difficulty { padding: 5px 14px; border-radius: 15px; font-size: 0.8rem; font-weight: 600; font-family: system-ui, sans-serif; }
        .difficulty.easy { background: rgba(5, 150, 105, 0.12); color: var(--success); }
        .difficulty.medium { background: rgba(217, 119, 6, 0.12); color: var(--warning); }
        .difficulty.hard { background: rgba(220, 38, 38, 0.12); color: var(--danger); }
        .expected-output { background: rgba(5, 150, 105, 0.06); border: 1px solid rgba(5, 150, 105, 0.15); border-radius: 8px; padding: 16px 20px; margin: 20px 0; }
        .expected-output-label { font-size: 0.8rem; font-weight: 600; color: var(--success); text-transform: uppercase; margin-bottom: 10px; font-family: system-ui, sans-serif; }
        .expected-output pre { font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; color: var(--text-secondary); margin: 0; background: transparent; padding: 0; }
        .hints-toggle { display: inline-flex; align-items: center; gap: 8px; padding: 10px 18px; background: var(--accent-light); border: 1px solid rgba(124, 58, 237, 0.2); border-radius: 8px; color: var(--accent); font-size: 0.9rem; cursor: pointer; font-family: inherit; }
        .hints-content { display: none; background: rgba(124, 58, 237, 0.05); border: 1px solid rgba(124, 58, 237, 0.12); border-radius: 8px; padding: 18px 24px; margin-top: 14px; }
        .hints-content.show { display: block; }
        .hints-content ul { margin: 0; padding-left: 20px; }
        .submit-section { background: var(--bg-dark); border-radius: 14px; padding: 40px; margin: 60px 0; color: white; }
        .submit-section h2 { font-size: 1.6rem; margin-bottom: 10px; color: white; }
        .submit-section > p { color: rgba(255,255,255,0.7); margin-bottom: 28px; }
        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 18px; margin-bottom: 24px; }
        .form-group label { display: block; font-size: 0.85rem; font-weight: 500; margin-bottom: 8px; color: rgba(255,255,255,0.8); font-family: system-ui, sans-serif; }
        .form-group input { width: 100%; padding: 14px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1rem; font-family: inherit; }
        .form-group input:focus { outline: none; border-color: var(--accent); }
        .honeypot { position: absolute; left: -9999px; }
        .submit-btn { background: var(--accent); color: white; border: none; padding: 16px 40px; border-radius: 8px; font-size: 1.05rem; font-weight: 600; cursor: pointer; font-family: system-ui, sans-serif; }
        .submit-status { margin-top: 20px; padding: 16px 20px; border-radius: 8px; font-family: system-ui, sans-serif; display: none; }
        .week-nav { display: flex; justify-content: space-between; align-items: center; margin-top: 60px; padding: 30px 0; border-top: 1px solid #ddd; }
        .week-nav a { display: flex; flex-direction: column; text-decoration: none; color: #7c3aed; font-family: system-ui, sans-serif; font-size: 0.9rem; padding: 12px 20px; border-radius: 8px; transition: background 0.2s; max-width: 45%; }
        .week-nav a:hover { background: #f3f0ff; }
        .week-nav a .nav-direction { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: #999; margin-bottom: 4px; }
        .week-nav a .nav-title { font-weight: 600; }
        .week-nav a.nav-next { text-align: right; margin-left: auto; }
        .week-nav a.nav-prev { text-align: left; margin-right: auto; }
        .summary-box { background: linear-gradient(135deg, var(--accent-light), rgba(124, 58, 237, 0.05)); border: 1px solid rgba(124, 58, 237, 0.2); border-radius: 12px; padding: 30px; margin: 50px 0; }
        .summary-box h3 { color: var(--accent); margin-bottom: 20px; font-size: 1.3rem; }
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; }
        .summary-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: var(--card-bg); border-radius: 8px; font-size: 0.95rem; }
        .file-tree { background: var(--bg-code); border-radius: 10px; padding: 20px; margin: 20px 0; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; color: #e4e4e7; white-space: pre; }
        @media (max-width: 700px) {
            .chapter-header h1 { font-size: 2rem; }
            .form-grid { grid-template-columns: 1fr; }
            .topbar { padding: 0 15px; }
            .topbar-toc-current .cur-label { max-width: 140px; }
            .topbar-toc-dropdown { min-width: 260px; }
            .scroll-progress { bottom: 12px; right: 14px; }
            .run-all-btn { font-size: 0.7rem; padding: 3px 10px; }
            .topbar-right span { display: none; }
        }

        .danger-box { padding: 18px 24px; border-radius: 8px; margin: 16px 0; border-left: 4px solid var(--danger); background: rgba(220, 38, 38, 0.05); }
        .danger-box::before { content: '‚ùå Common Mistake'; display: block; font-weight: 600; color: var(--danger); margin-bottom: 8px; font-size: 0.9rem; }
        .danger-box p { margin: 0; color: var(--text-secondary); font-size: 0.95rem; }
        .quiz-box { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; margin: 30px 0; overflow: hidden; }
        .quiz-header { padding: 14px 20px; background: linear-gradient(135deg, rgba(5,150,105,0.1), rgba(5,150,105,0.03)); border-bottom: 1px solid var(--border); font-family: system-ui, sans-serif; font-weight: 600; color: var(--success); font-size: 0.95rem; }
        .quiz-body { padding: 20px; }
        .quiz-q { margin: 12px 0; padding: 14px 18px; background: rgba(124, 58, 237, 0.03); border-radius: 8px; border: 1px solid var(--border); }
        .quiz-q strong { color: var(--accent); font-family: system-ui, sans-serif; }
        .quiz-q .answer { color: var(--accent); font-size: 0.9rem; margin-top: 8px; cursor: pointer; display: inline-block; padding: 4px 12px; border-radius: 6px; background: var(--accent-light); border: 1px solid rgba(124,58,237,0.2); font-family: system-ui, sans-serif; }
        .quiz-q .answer:hover { background: rgba(124, 58, 237, 0.15); }
        .quiz-q .answer-text { display: none; color: var(--success); margin-top: 8px; font-size: 0.93rem; padding: 10px 14px; background: rgba(5,150,105,0.06); border-radius: 6px; border-left: 3px solid var(--success); }
        .case-study-box { background: var(--card-bg); border: 2px solid rgba(124, 58, 237, 0.3); border-radius: 12px; margin: 30px 0; overflow: hidden; }
        .case-study-header { padding: 16px 20px; background: linear-gradient(135deg, rgba(124,58,237,0.12), rgba(124,58,237,0.04)); border-bottom: 1px solid rgba(124,58,237,0.2); font-family: system-ui, sans-serif; font-weight: 600; color: var(--accent); font-size: 1rem; display: flex; align-items: center; gap: 10px; }
        .case-study-body { padding: 24px; }
        .case-study-body p { color: var(--text-secondary); margin-bottom: 14px; }
        .content strong { color: var(--text-primary); }
        .summary-item .icon { font-size: 1.3rem; }
    </style>
</head>
<body>
    <nav class="topbar">
        <a class="home-link" href="index.html?home=true">‚Üê Course Home</a>
        <div class="topbar-toc-center" id="tocCenter">
            <div class="topbar-toc-current" onclick="document.getElementById('tocCenter').classList.toggle('open')">
                <span class="cur-num" id="tocCurNum">1.</span>
                <span class="cur-label" id="tocCurLabel">Opening and Closing Files</span>
                <span class="cur-arrow">‚ñº</span>
            </div>
            <div class="topbar-toc-dropdown" id="tocDropdown"></div>
        </div>
        <div class="topbar-right">
            <button class="run-all-btn" id="runAllBtn" onclick="runAllCode()">‚ñ∂ Run All</button>
            <a href="Week_07.html">‚Üê Week 07</a>
            <a href="Week_09.html">Week 09 ‚Üí</a>
        </div>
        <div class="topbar-progress" id="topbarProgress"></div>
    </nav>

    <div class="scroll-progress" id="scrollProgress">
        <svg viewBox="0 0 44 44"><circle class="bg" cx="22" cy="22" r="19"/><circle class="fg" id="scrollCircle" cx="22" cy="22" r="19" stroke-dasharray="119.38" stroke-dashoffset="119.38"/></svg>
        <span id="scrollPct">0%</span>
    </div>
    
    <div class="container">
        <header class="chapter-header">
            <span class="chapter-label">Week 08</span>
            <h1>File Handling</h1>
            <div class="chapter-meta">
                <span>üìö Computer Programming II</span>
                <span>üë®‚Äçüè´ Dr. Arif Solmaz</span>
            </div>
        </header>
        
        <div class="objectives-box">
            <h3>üéØ Learning Objectives</h3>
            <ul>
                <li>Open, read, and write text files</li>
                <li>Use context managers (with statement)</li>
                <li>Handle different file modes (r, w, a, x)</li>
                <li>Work with CSV files using csv module</li>
                <li>Read and write JSON data</li>
                <li>Navigate file paths and directories</li>
                <li>Handle file exceptions gracefully</li>
                <li>Process engineering data files</li>
            </ul>
        </div>

        <!-- Recap Quiz: Week 7 Review -->
        <section id="recap" class="section" style="scroll-margin-top: 70px;">
            <div class="section-header">
                <div class="section-number" style="background: var(--success);">üß†</div>
                <h2>Recap Quiz: Week 7 Review</h2>
            </div>
            <p>Before learning file I/O, let's check your string methods knowledge from last week.</p>
            <div class="quiz-box">
                <div class="quiz-header">üß† Quick Review ‚Äî Test Your Week 7 Knowledge</div>
                <div class="quiz-body">
                    <div class="quiz-q">
                        <strong>Q1:</strong> Does <code>"hello".upper()</code> change the original string?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ No! Strings are immutable. <code>.upper()</code> returns a NEW string. You must reassign: <code>s = s.upper()</code></div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q2:</strong> What does <code>"a,b,,c".split(",")</code> return?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ <code>["a", "b", "", "c"]</code> ‚Äî Note the empty string for the consecutive comma. <code>.split()</code> preserves empty segments.</div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q3:</strong> What does <code>" hello ".strip()</code> return?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ <code>"hello"</code> ‚Äî <code>.strip()</code> removes leading and trailing whitespace. Use <code>.lstrip()</code> or <code>.rstrip()</code> for one side only.</div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q4:</strong> How do you join <code>["a", "b", "c"]</code> into <code>"a-b-c"</code>?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ <code>"-".join(["a", "b", "c"])</code> ‚Äî The separator string calls <code>.join()</code> on the list.</div>
                    </div>
                    <div class="quiz-q">
                        <strong>Q5:</strong> What does <code>"hello world".find("xyz")</code> return?<br>
                        <span class="answer" onclick="this.nextElementSibling.style.display='block'; this.style.display='none';">üëÅ Show Answer</span>
                        <div class="answer-text">‚úÖ <code>-1</code> ‚Äî Not found. Remember: -1 is truthy, so always check <code>if result != -1:</code></div>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="content">
            <!-- Section 1: Opening and Closing Files -->
            <section id="part1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <h2>Opening and Closing Files</h2>
                </div>
                
                <p>Files must be opened before reading/writing and closed when done. Python provides several modes for opening files, each serving a specific purpose.</p>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Mode</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>'r'</code></td><td>Read (default) - file must exist</td></tr>
                            <tr><td><code>'w'</code></td><td>Write - creates new or truncates existing</td></tr>
                            <tr><td><code>'a'</code></td><td>Append - adds to end of file</td></tr>
                            <tr><td><code>'x'</code></td><td>Exclusive create - fails if file exists</td></tr>
                            <tr><td><code>'r+'</code></td><td>Read and write</td></tr>
                            <tr><td><code>'b'</code></td><td>Binary mode (add to other modes)</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <h3>Context Manager (Recommended)</h3>
                <p>The <code>with</code> statement automatically closes the file when done, even if an error occurs.</p>
                
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 1.1: Context Manager</span>
                        <button class="code-figure-run" onclick="runCode('code1')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code1"># Create a sample file using context manager
with open('example.txt', 'w') as file:
    file.write('Hello, World!\n')
    file.write('This is a test file.\n')
    file.write('Python file handling is easy!')

print("File created successfully!")

# Read the file
with open('example.txt', 'r') as file:
    content = file.read()
    print("\nFile content:")
    print(content)</textarea>
                    <div class="code-output" id="outputcode1">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 1.2: File Auto-Close</span>
                        <button class="code-figure-run" onclick="runCode('code2')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code2"># File is automatically closed outside 'with' block
with open('example.txt', 'r') as file:
    print(f"Inside with block - closed: {file.closed}")

print(f"Outside with block - closed: {file.closed}")</textarea>
                    <div class="code-output" id="outputcode2">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <div class="warning-box info-box">
                    <p>Always use the <code>with</code> statement for file operations. It ensures files are properly closed even if an exception occurs.</p>
                </div>
            </section>
            
            <!-- Section 2: Reading Files -->
            <section id="part2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <h2>Reading Files</h2>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Method</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>read()</code></td><td>Read entire file as string</td></tr>
                            <tr><td><code>read(n)</code></td><td>Read n characters</td></tr>
                            <tr><td><code>readline()</code></td><td>Read one line</td></tr>
                            <tr><td><code>readlines()</code></td><td>Read all lines into a list</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 2.1: Reading Methods</span>
                        <button class="code-figure-run" onclick="runCode('code3')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code3"># Create multi-line file
with open('lines.txt', 'w') as f:
    f.write('Line 1: Hello\n')
    f.write('Line 2: World\n')
    f.write('Line 3: Python\n')

# read() - entire file
with open('lines.txt', 'r') as f:
    print("=== read() ===")
    print(f.read())

# readline() - one line at a time
with open('lines.txt', 'r') as f:
    print("=== readline() ===")
    print(f"First: {f.readline()}", end='')
    print(f"Second: {f.readline()}", end='')</textarea>
                    <div class="code-output" id="outputcode3">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h3>Iterating Through Files</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 2.2: File Iteration</span>
                        <button class="code-figure-run" onclick="runCode('code4')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code4"># Memory-efficient iteration
with open('lines.txt', 'r') as f:
    print("=== Iterating ===")
    for line_num, line in enumerate(f, 1):
        print(f"{line_num}: {line.strip()}")

# Read into clean list (no newlines)
with open('lines.txt', 'r') as f:
    lines = [line.strip() for line in f]
    print(f"\nClean list: {lines}")</textarea>
                    <div class="code-output" id="outputcode4">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <div class="tip-box info-box">
                    <p>For large files, iterate line by line instead of using <code>read()</code> or <code>readlines()</code>. This doesn't load the entire file into memory.</p>
                </div>
            </section>
            
            <!-- Section 3: Writing Files -->
            <section id="part3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <h2>Writing Files</h2>
                </div>
                
                <h3>write() and writelines()</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 3.1: Write Methods</span>
                        <button class="code-figure-run" onclick="runCode('code5')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code5"># write() - write string
with open('output.txt', 'w') as f:
    f.write('First line\n')
    f.write('Second line\n')

# writelines() - write list of strings
items = ['apple\n', 'banana\n', 'cherry\n']
with open('output.txt', 'w') as f:
    f.writelines(items)

# Verify
with open('output.txt', 'r') as f:
    print(f.read())</textarea>
                    <div class="code-output" id="outputcode5">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h3>Append Mode</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 3.2: Append Mode</span>
                        <button class="code-figure-run" onclick="runCode('code6')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code6"># Create initial file
with open('log.txt', 'w') as f:
    f.write('Log started\n')

# Append to file
with open('log.txt', 'a') as f:
    f.write('Entry 1: System OK\n')
    f.write('Entry 2: Sensor reading\n')

# View result
with open('log.txt', 'r') as f:
    print(f.read())</textarea>
                    <div class="code-output" id="outputcode6">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <div class="warning-box info-box">
                    <p><code>writelines()</code> doesn't add newlines automatically! Include <code>\n</code> in each string or they'll run together.</p>
                </div>
            </section>
            
            <!-- Section 4: Working with CSV -->
            <section id="part4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <h2>Working with CSV Files</h2>
                </div>
                
                <p>CSV (Comma-Separated Values) is one of the most common formats for tabular data. Python's <code>csv</code> module provides tools for reading and writing CSV files.</p>
                
                <h3>Reading CSV</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 4.1: CSV Reader</span>
                        <button class="code-figure-run" onclick="runCode('code7')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code7">import csv

# Create sample CSV
with open('data.csv', 'w', newline='') as f:
    f.write('name,age,city\n')
    f.write('Ali,21,Istanbul\n')
    f.write('Ayse,22,Ankara\n')
    f.write('Mehmet,23,Izmir\n')

# Read with csv.reader
with open('data.csv', 'r') as f:
    reader = csv.reader(f)
    header = next(reader)  # Get header
    print(f"Header: {header}")
    print("-" * 30)
    for row in reader:
        print(f"Name: {row[0]}, Age: {row[1]}, City: {row[2]}")</textarea>
                    <div class="code-output" id="outputcode7">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h3>DictReader - Access by Column Name</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 4.2: DictReader</span>
                        <button class="code-figure-run" onclick="runCode('code8')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code8">import csv

# DictReader - returns dictionaries
with open('data.csv', 'r') as f:
    reader = csv.DictReader(f)
    
    print("=== DictReader ===")
    for row in reader:
        print(f"{row['name']} is {row['age']} from {row['city']}")</textarea>
                    <div class="code-output" id="outputcode8">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h3>Writing CSV</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 4.3: CSV Writer</span>
                        <button class="code-figure-run" onclick="runCode('code9')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code9">import csv

# Write with csv.writer
data = [
    ['sensor_id', 'temperature', 'humidity'],
    ['TEMP_001', 25.5, 60],
    ['TEMP_002', 26.1, 58],
    ['TEMP_003', 24.8, 62]
]

with open('sensors.csv', 'w', newline='') as f:
    writer = csv.writer(f)
    writer.writerows(data)

# Verify
with open('sensors.csv', 'r') as f:
    print(f.read())</textarea>
                    <div class="code-output" id="outputcode9">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>

            <!-- Section 5: Working with JSON -->
            <section id="part5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <h2>Working with JSON Files</h2>
                </div>
                
                <p>JSON (JavaScript Object Notation) is a popular format for structured data, widely used for configuration files, APIs, and data exchange.</p>
                
                <pre>json.dumps(data)    # Python ‚Üí JSON string
json.loads(string)  # JSON string ‚Üí Python
json.dump(data, f)  # Write JSON to file
json.load(f)        # Read JSON from file</pre>
                
                <h3>Python to JSON</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 5.1: JSON Serialization</span>
                        <button class="code-figure-run" onclick="runCode('code10')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code10">import json

# Python dict to JSON string
data = {
    'name': 'Ali',
    'age': 21,
    'courses': ['Math', 'Physics', 'Programming'],
    'active': True
}

# Basic conversion
json_str = json.dumps(data)
print(f"JSON string: {json_str}")

# Pretty print with indent
json_pretty = json.dumps(data, indent=2)
print(f"\nPretty JSON:\n{json_pretty}")</textarea>
                    <div class="code-output" id="outputcode10">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h3>JSON to Python</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 5.2: JSON Parsing</span>
                        <button class="code-figure-run" onclick="runCode('code11')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code11">import json

# JSON string to Python dict
json_string = '{"name": "Ayse", "age": 22, "active": true}'

data = json.loads(json_string)
print(f"Python dict: {data}")
print(f"Name: {data['name']}")
print(f"Type: {type(data)}")</textarea>
                    <div class="code-output" id="outputcode11">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h3>JSON Files</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 5.3: JSON File Operations</span>
                        <button class="code-figure-run" onclick="runCode('code12')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code12">import json

# Write JSON to file
config = {
    'database': {'host': 'localhost', 'port': 5432},
    'debug': True,
    'max_connections': 100
}

with open('config.json', 'w') as f:
    json.dump(config, f, indent=2)

print("JSON file created!")

# Read JSON from file
with open('config.json', 'r') as f:
    loaded = json.load(f)

print(f"Host: {loaded['database']['host']}")
print(f"Debug: {loaded['debug']}")</textarea>
                    <div class="code-output" id="outputcode12">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 6: File Paths and Directories -->
            <section id="part6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <h2>File Paths and Directories</h2>
                </div>
                
                <p>Python's <code>os</code> and <code>os.path</code> modules provide cross-platform file path operations.</p>
                
                <h3>Path Operations</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 6.1: Path Operations</span>
                        <button class="code-figure-run" onclick="runCode('code13')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code13">import os
import os.path

# Current directory
print(f"Current dir: {os.getcwd()}")

# Path operations
filepath = "/home/user/data/sensors.csv"
print(f"\nPath: {filepath}")
print(f"Directory: {os.path.dirname(filepath)}")
print(f"Filename: {os.path.basename(filepath)}")
print(f"Extension: {os.path.splitext(filepath)[1]}")

# Join paths (cross-platform)
new_path = os.path.join("data", "2024", "sensors.csv")
print(f"\nJoined: {new_path}")</textarea>
                    <div class="code-output" id="outputcode13">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h3>File Existence Checks</h3>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 6.2: File Checks</span>
                        <button class="code-figure-run" onclick="runCode('code14')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code14">import os

# Create test file
with open('test.txt', 'w') as f:
    f.write('test')

# Check existence
print(f"test.txt exists: {os.path.exists('test.txt')}")
print(f"missing.txt exists: {os.path.exists('missing.txt')}")
print(f"test.txt is file: {os.path.isfile('test.txt')}")

# Get file size
size = os.path.getsize('test.txt')
print(f"File size: {size} bytes")</textarea>
                    <div class="code-output" id="outputcode14">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 7: Exception Handling -->
            <section id="part7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <h2>File Exception Handling</h2>
                </div>
                
                <p>File operations can fail for many reasons. Always handle exceptions to make your code robust.</p>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Exception</th><th>When Raised</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>FileNotFoundError</code></td><td>File doesn't exist (read mode)</td></tr>
                            <tr><td><code>PermissionError</code></td><td>No read/write permission</td></tr>
                            <tr><td><code>IsADirectoryError</code></td><td>Trying to open directory as file</td></tr>
                            <tr><td><code>FileExistsError</code></td><td>File exists (exclusive mode 'x')</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 7.1: Exception Handling</span>
                        <button class="code-figure-run" onclick="runCode('code15')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code15">def read_file_safely(filename):
    """Read file with proper exception handling"""
    try:
        with open(filename, 'r') as f:
            return f.read()
    except FileNotFoundError:
        print(f"Error: '{filename}' not found")
        return None
    except PermissionError:
        print(f"Error: No permission to read '{filename}'")
        return None
    except Exception as e:
        print(f"Unexpected error: {e}")
        return None

# Test with existing file
content = read_file_safely('example.txt')
if content:
    print(f"Content: {content[:30]}...")

# Test with missing file
content = read_file_safely('missing.txt')</textarea>
                    <div class="code-output" id="outputcode15">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 8: Binary Files -->
            <section id="part8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <h2>Binary Files</h2>
                </div>
                
                <p>Binary mode (<code>'rb'</code>, <code>'wb'</code>) is used for non-text files like images, audio, or any file where you need exact byte control.</p>
                
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 8.1: Binary Operations</span>
                        <button class="code-figure-run" onclick="runCode('code16')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code16"># Write binary data
data = bytes([0x48, 0x65, 0x6C, 0x6C, 0x6F])  # "Hello"

with open('binary.bin', 'wb') as f:
    f.write(data)

print(f"Wrote {len(data)} bytes")

# Read binary data
with open('binary.bin', 'rb') as f:
    content = f.read()

print(f"Read: {content}")
print(f"As string: {content.decode('utf-8')}")</textarea>
                    <div class="code-output" id="outputcode16">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 9: Engineering Applications -->
            <section id="part9" class="section">
                <div class="section-header">
                    <div class="section-number">9</div>
                    <h2>Engineering Applications</h2>
                </div>
                
                <h4>Sensor Data Logger</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 9.1: Data Logger</span>
                        <button class="code-figure-run" onclick="runCode('code17')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code17">import csv
from datetime import datetime

def log_sensor_reading(sensor_id, value, unit, filename='sensor_log.csv'):
    """Log sensor reading to CSV file"""
    timestamp = datetime.now().strftime('%Y-%m-%d %H:%M:%S')
    
    # Check if file exists
    import os
    file_exists = os.path.exists(filename)
    
    with open(filename, 'a', newline='') as f:
        writer = csv.writer(f)
        if not file_exists:
            writer.writerow(['timestamp', 'sensor_id', 'value', 'unit'])
        writer.writerow([timestamp, sensor_id, value, unit])

# Simulate sensor readings
readings = [
    ('TEMP_001', 25.5, 'C'),
    ('PRESS_001', 101.3, 'kPa'),
    ('HUMID_001', 65.0, '%')
]

for sensor_id, value, unit in readings:
    log_sensor_reading(sensor_id, value, unit)

# View log
with open('sensor_log.csv', 'r') as f:
    print(f.read())</textarea>
                    <div class="code-output" id="outputcode17">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
                
                <h4>Configuration Manager</h4>
                <div class="code-figure">
                    <div class="code-figure-header">
                        <span class="code-figure-label">Figure 9.2: Config Manager</span>
                        <button class="code-figure-run" onclick="runCode('code18')">‚ñ∂ Run</button>
                    </div>
                    <textarea class="code-editor" id="code18">import json
import os

class ConfigManager:
    def __init__(self, filename='config.json'):
        self.filename = filename
        self.config = self.load()
    
    def load(self):
        if os.path.exists(self.filename):
            with open(self.filename, 'r') as f:
                return json.load(f)
        return {}
    
    def save(self):
        with open(self.filename, 'w') as f:
            json.dump(self.config, f, indent=2)
    
    def get(self, key, default=None):
        return self.config.get(key, default)
    
    def set(self, key, value):
        self.config[key] = value
        self.save()

# Usage
config = ConfigManager('app_config.json')
config.set('sensor_interval', 5)
config.set('max_readings', 1000)
config.set('debug', True)

print(f"Interval: {config.get('sensor_interval')}")
print(f"Debug: {config.get('debug')}")
print(f"Missing: {config.get('missing', 'default')}")</textarea>
                    <div class="code-output" id="outputcode18">
                        <div class="code-output-label">Output</div>
                        <div class="code-output-content"></div>
                    </div>
                </div>
            </section>
            
            <!-- Summary -->
            <div class="summary-box">
                <h3>üìã Week 8 Summary</h3>
                <div class="summary-grid">
                    <div class="summary-item"><span class="icon">üìÇ</span><span>Use with statement</span></div>
                    <div class="summary-item"><span class="icon">üìñ</span><span>read(), readline()</span></div>
                    <div class="summary-item"><span class="icon">‚úèÔ∏è</span><span>write(), writelines()</span></div>
                    <div class="summary-item"><span class="icon">üìä</span><span>csv module for CSV</span></div>
                    <div class="summary-item"><span class="icon">üìã</span><span>json module for JSON</span></div>
                    <div class="summary-item"><span class="icon">üìÅ</span><span>os.path operations</span></div>
                    <div class="summary-item"><span class="icon">‚ö†Ô∏è</span><span>Handle exceptions</span></div>
                    <div class="summary-item"><span class="icon">üîÑ</span><span>Modes: r, w, a, rb, wb</span></div>
                </div>
            </div>

            <!-- Common Mistakes: File I/O -->
            <section id="mistakes" class="section" style="scroll-margin-top: 70px;">
                <div class="section-header">
                    <div class="section-number" style="background: var(--danger);">‚ùå</div>
                    <h2>Common Mistakes to Avoid</h2>
                </div>
                <p>These are the most frequent errors students make with file handling. Study them before the exercises!</p>
                
                <div class="danger-box">
                    <p><strong>Forgetting to close files</strong><br>
                    <code>f = open("file.txt")</code> without <code>f.close()</code> can leak resources and corrupt data. Always use <code>with open(...) as f:</code> ‚Äî it closes automatically!</p>
                </div>
                <div class="danger-box">
                    <p><strong>Using <code>"w"</code> mode accidentally ‚Äî data erased!</strong><br>
                    <code>open("data.txt", "w")</code> erases the entire file before writing. To add data, use <code>"a"</code> (append). This is a common cause of data loss.</p>
                </div>
                <div class="danger-box">
                    <p><strong>Not handling <code>FileNotFoundError</code></strong><br>
                    <code>open("missing.txt")</code> crashes if the file doesn't exist. Always wrap in <code>try/except FileNotFoundError</code> or check with <code>os.path.exists()</code> first.</p>
                </div>
                <div class="danger-box">
                    <p><strong>Forgetting <code>newline=""</code> with CSV files</strong><br>
                    On Windows, <code>csv.writer</code> without <code>open("file.csv", "w", newline="")</code> adds blank lines between rows. Always include <code>newline=""</code>.</p>
                </div>
                <div class="danger-box">
                    <p><strong>Reading a file twice without resetting</strong><br>
                    After <code>f.read()</code>, the file pointer is at the end. A second <code>f.read()</code> returns empty string <code>""</code>. Use <code>f.seek(0)</code> to reset, or read once and store in a variable.</p>
                </div>
            </section>

            <!-- Exercises Section -->
            <section id="exercises" class="section">
                <div class="section-header">
                    <div class="section-number">üìù</div>
                    <h2>Practice Exercises</h2>
                </div>
                
                <p>Complete these 15 exercises to master file handling in Python.</p>
                
                <!-- Exercise 1 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">1</span>Create and Write File</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Create a file named "greeting.txt" and write "Hello, Python!" to it.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints1')">üí° Show Hints</button>
                            <div class="hints-content" id="hints1">
                                <ul>
                                    <li>Use <code>with open('filename', 'w') as f:</code></li>
                                    <li>Write with <code>f.write("text")</code></li>
                                    <li>Mode 'w' creates new file or overwrites</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex1')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex1"># Create file and write greeting

# Verify by reading
with open('greeting.txt', 'r') as f:
    print(f.read())</textarea>
                            <div class="code-output" id="outputex1">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 2 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">2</span>Read File Lines</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Create a file with 3 lines and read them into a list.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>['Line 1', 'Line 2', 'Line 3']</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints2')">üí° Show Hints</button>
                            <div class="hints-content" id="hints2">
                                <ul>
                                    <li>Use <code>f.readlines()</code> to get list</li>
                                    <li>Strip newlines: <code>[line.strip() for line in f]</code></li>
                                    <li>Or use list comprehension with <code>.strip()</code></li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex2')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex2"># Create file with 3 lines
with open('lines.txt', 'w') as f:
    f.write('Line 1\nLine 2\nLine 3\n')

# Read into list (remove newlines)
with open('lines.txt', 'r') as f:
    lines = 
    
print(lines)</textarea>
                            <div class="code-output" id="outputex2">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 3 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">3</span>Append to File</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Append "New entry" to an existing file.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints3')">üí° Show Hints</button>
                            <div class="hints-content" id="hints3">
                                <ul>
                                    <li>Use mode 'a' for append: <code>open('file', 'a')</code></li>
                                    <li>Write adds to end: <code>f.write("New entry\n")</code></li>
                                    <li>Append doesn't overwrite existing content</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex3')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex3"># Create initial file
with open('log.txt', 'w') as f:
    f.write('Initial entry\n')

# Append new entry

# Verify
with open('log.txt', 'r') as f:
    print(f.read())</textarea>
                            <div class="code-output" id="outputex3">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 4 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">4</span>Count Lines</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Count the number of lines in a file.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>Line count: 5</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints4')">üí° Show Hints</button>
                            <div class="hints-content" id="hints4">
                                <ul>
                                    <li>Read all lines: <code>f.readlines()</code></li>
                                    <li>Count with <code>len()</code></li>
                                    <li>Example: <code>len(f.readlines())</code></li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex4')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex4"># Create file
with open('count.txt', 'w') as f:
    for i in range(5):
        f.write(f'Line {i+1}\n')

# Count lines
with open('count.txt', 'r') as f:
    count = 
    
print(f"Line count: {count}")</textarea>
                            <div class="code-output" id="outputex4">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 5 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">5</span>Check File Exists</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Check if a file exists before reading it.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints5')">üí° Show Hints</button>
                            <div class="hints-content" id="hints5">
                                <ul>
                                    <li>Use <code>os.path.exists(filename)</code></li>
                                    <li>Returns True if file exists</li>
                                    <li>Import: <code>import os</code></li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex5')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex5">import os

filename = 'example.txt'

# Check if file exists before reading
if :
    with open(filename, 'r') as f:
        print(f"Content: {f.read()[:20]}...")
else:
    print(f"File '{filename}' not found")</textarea>
                            <div class="code-output" id="outputex5">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 6 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">6</span>Write CSV</div>
                        <span class="difficulty easy">Easy</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Write a list of students to a CSV file.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints6')">üí° Show Hints</button>
                            <div class="hints-content" id="hints6">
                                <ul>
                                    <li>Use <code>csv.writer(file)</code></li>
                                    <li>Write rows: <code>writer.writerows(students)</code></li>
                                    <li>Open with <code>newline=''</code> for CSV</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex6')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex6">import csv

students = [
    ['id', 'name', 'grade'],
    [1, 'Ali', 85],
    [2, 'Ayse', 92],
    [3, 'Mehmet', 78]
]

# Write to CSV

# Verify
with open('students.csv', 'r') as f:
    print(f.read())</textarea>
                            <div class="code-output" id="outputex6">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 7 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">7</span>Read CSV to Dict</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Read CSV file using DictReader and print each row.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints7')">üí° Show Hints</button>
                            <div class="hints-content" id="hints7">
                                <ul>
                                    <li>Use <code>csv.DictReader(file)</code></li>
                                    <li>Each row is a dictionary</li>
                                    <li>Access values: <code>row['column_name']</code></li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex7')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex7">import csv

# Read students.csv using DictReader
with open('students.csv', 'r') as f:
    reader = 
    for row in reader:
        print(f"{row['name']}: {row['grade']}")</textarea>
                            <div class="code-output" id="outputex7">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 8 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">8</span>JSON Write and Read</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Write a dictionary to JSON file and read it back.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints8')">üí° Show Hints</button>
                            <div class="hints-content" id="hints8">
                                <ul>
                                    <li>Write: <code>json.dump(data, file)</code></li>
                                    <li>Read: <code>json.load(file)</code></li>
                                    <li>Import: <code>import json</code></li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex8')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex8">import json

settings = {
    'theme': 'dark',
    'font_size': 14,
    'auto_save': True
}

# Write to JSON file

# Read back
with open('settings.json', 'r') as f:
    loaded = 
    
print(f"Theme: {loaded['theme']}")</textarea>
                            <div class="code-output" id="outputex8">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 9 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">9</span>File Path Operations</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Extract filename and extension from a path.</p>
                        <div class="expected-output">
                            <div class="expected-output-label">‚úì Expected Output</div>
                            <pre>Filename: data.csv
Extension: .csv</pre>
                        </div>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints9')">üí° Show Hints</button>
                            <div class="hints-content" id="hints9">
                                <ul>
                                    <li>Use <code>os.path.basename(path)</code> for filename</li>
                                    <li>Use <code>os.path.splitext(path)</code> for extension</li>
                                    <li>splitext returns (name, extension) tuple</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex9')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex9">import os.path

filepath = "/home/user/documents/data.csv"

# Get filename and extension
filename = 
extension = 

print(f"Filename: {filename}")
print(f"Extension: {extension}")</textarea>
                            <div class="code-output" id="outputex9">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 10 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">10</span>Exception Handling</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Handle FileNotFoundError when reading a missing file.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints10')">üí° Show Hints</button>
                            <div class="hints-content" id="hints10">
                                <ul>
                                    <li>Use <code>try:</code> and <code>except:</code> blocks</li>
                                    <li>Catch specific: <code>except FileNotFoundError:</code></li>
                                    <li>Put risky code in try block</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex10')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex10"># Try to read a file that doesn't exist

    with open('nonexistent.txt', 'r') as f:
        print(f.read())

    print("File not found - using default")</textarea>
                            <div class="code-output" id="outputex10">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 11 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">11</span>Copy File Contents</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Copy contents from one file to another.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints11')">üí° Show Hints</button>
                            <div class="hints-content" id="hints11">
                                <ul>
                                    <li>Read source: <code>content = f.read()</code></li>
                                    <li>Write to dest: <code>f.write(content)</code></li>
                                    <li>Use two separate with blocks or nested</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex11')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex11"># Create source file
with open('source.txt', 'w') as f:
    f.write('This is the source content.\n')

# Copy to destination

# Verify
with open('destination.txt', 'r') as f:
    print(f"Copied: {f.read()}")</textarea>
                            <div class="code-output" id="outputex11">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 12 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">12</span>Write Multiple Files</div>
                        <span class="difficulty medium">Medium</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Create multiple numbered files in a loop.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints12')">üí° Show Hints</button>
                            <div class="hints-content" id="hints12">
                                <ul>
                                    <li>Use f-string for filename: <code>f"file_{i}.txt"</code></li>
                                    <li>Open and write inside the loop</li>
                                    <li>Write content: <code>f.write(f"File {i}")</code></li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex12')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex12">import os

# Create 3 numbered files: file_1.txt, file_2.txt, file_3.txt
for i in range(1, 4):
    filename = f"file_{i}.txt"
    # Write to file
    
# Verify files were created
for i in range(1, 4):
    filename = f"file_{i}.txt"
    if os.path.exists(filename):
        print(f"{filename} created")</textarea>
                            <div class="code-output" id="outputex12">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 13 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">13</span>CSV Data Analysis</div>
                        <span class="difficulty hard">Challenge</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Calculate average grade from CSV file.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints13')">üí° Show Hints</button>
                            <div class="hints-content" id="hints13">
                                <ul>
                                    <li>Use DictReader to access grades by column name</li>
                                    <li>Convert grade to int/float before summing</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex13')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex13">import csv

# students.csv already exists from exercise 6
# Calculate average grade
with open('students.csv', 'r') as f:
    reader = csv.DictReader(f)
    grades = []
    for row in reader:
        # Add grade to list
        pass
    
# Calculate and print average
avg = sum(grades) / len(grades)
print(f"Average grade: {avg:.1f}")</textarea>
                            <div class="code-output" id="outputex13">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 14 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">14</span>Log Analyzer</div>
                        <span class="difficulty hard">Challenge</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Count ERROR and WARNING entries in a log file.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints14')">üí° Show Hints</button>
                            <div class="hints-content" id="hints14">
                                <ul>
                                    <li>Use <code>"ERROR" in line</code> to check for errors</li>
                                    <li>Iterate through file line by line</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex14')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex14"># Create sample log
with open('app.log', 'w') as f:
    f.write('[INFO] System started\n')
    f.write('[ERROR] Connection failed\n')
    f.write('[WARNING] Low memory\n')
    f.write('[INFO] Processing complete\n')
    f.write('[ERROR] File not found\n')

# Count errors and warnings
errors = 0
warnings = 0

with open('app.log', 'r') as f:
    for line in f:
        # Count errors and warnings
        pass

print(f"Errors: {errors}")
print(f"Warnings: {warnings}")</textarea>
                            <div class="code-output" id="outputex14">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>
                
                <!-- Exercise 15 -->
                <div class="exercise-card">
                    <div class="exercise-header">
                        <div class="exercise-title"><span class="exercise-number">15</span>Config File Manager</div>
                        <span class="difficulty hard">Challenge</span>
                    </div>
                    <div class="exercise-body"><div class="exercise-info-panel"><p class="exercise-description">Create a function to load config with defaults if file missing.</p>
                        <div class="hints-container">
                            <button class="hints-toggle" onclick="toggleHints('hints15')">üí° Show Hints</button>
                            <div class="hints-content" id="hints15">
                                <ul>
                                    <li>Use try/except for FileNotFoundError</li>
                                    <li>Return default config if file doesn't exist</li>
                                </ul>
                            </div>
                        </div></div><div class="exercise-code-panel"><div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Your Solution</span>
                                <button class="code-figure-run" onclick="runCode('ex15')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="ex15">import json

def load_config(filename, defaults=None):
    """Load config from JSON, return defaults if missing"""
    if defaults is None:
        defaults = {}
    
    # Your code here
    pass

# Test with missing file
config = load_config('missing_config.json', 
                     {'debug': False, 'port': 8080})
print(f"Config: {config}")</textarea>
                            <div class="code-output" id="outputex15">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div></div></div>
                </div>

                <!-- Bridge Exercise ‚Üí Week 9 -->
                <div class="exercise-card" style="border: 2px solid rgba(217, 119, 6, 0.35); background: linear-gradient(135deg, rgba(217,119,6,0.04), transparent);">
                    <div class="exercise-header" style="background: linear-gradient(135deg, rgba(217,119,6,0.12), rgba(217,119,6,0.04));">
                        <div class="exercise-title"><span class="exercise-number" style="background: linear-gradient(135deg, #d97706, #f59e0b);">üåâ</span>Bridge Exercise: Sneak Peek at Week 9</div>
                        <span class="difficulty medium">Preview</span>
                    </div>
                    <div class="exercise-body">
                        <div class="exercise-info-panel">
                            <p class="exercise-description"><strong>Next week: Error Handling!</strong> Your file-reading code works fine with clean data ‚Äî but what happens when a CSV has missing values, corrupt rows, or invalid numbers? Run this to see it crash!</p>
                            <div class="expected-output">
                                <div class="expected-output-label">‚úì Expected Output</div>
                                <pre>Reading sensor data...
Row 1: temp=24.5
Row 2: temp=ERROR ‚Äî crashes here!

The program dies on bad data! üò´
Next week: try/except catches errors gracefully!</pre>
                            </div>
                            <div class="hints-container">
                                <button class="hints-toggle" onclick="toggleHints('hintsBridge')">üí° Show Hints</button>
                                <div class="hints-content" id="hintsBridge">
                                    <ul>
                                        <li><code>float("N/A")</code> raises a <code>ValueError</code> and crashes the whole program</li>
                                        <li>Real-world data is messy ‚Äî sensors fail, connections drop, files get corrupted</li>
                                        <li>Next week: <code>try: ... except ValueError: ...</code> lets you handle bad data gracefully</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="exercise-code-panel">
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Bridge Exercise ‚Äî Preview of Week 9: Error Handling</span>
                                <button class="code-figure-run" onclick="runCode('exBridge')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="exBridge"># Bridge Exercise: Corrupted Data Crashes Everything!
# Simulating reading a CSV with bad data

csv_rows = [
    "timestamp,sensor_id,temp",
    "2024-01-01 08:00,T01,24.5",
    "2024-01-01 08:05,T01,N/A",      # Sensor failure!
    "2024-01-01 08:10,T01,25.1",
]

print("Reading sensor data...")
readings = []
for i, row in enumerate(csv_rows[1:], 1):  # Skip header
    parts = row.split(",")
    temp = float(parts[2])   # This CRASHES on "N/A"!
    readings.append(temp)
    print(f"Row {i}: temp={temp}")

print(f"\nAverage: {sum(readings)/len(readings):.1f}")
</textarea>
                            <div class="code-output" id="outputexBridge">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="tip-box info-box">
                    <p>Real sensor data is messy ‚Äî values go missing, connections drop, files get corrupted. Next week you'll learn <strong>error handling</strong> with <code>try/except</code> to catch and recover from these problems gracefully!</p>
                </div>
            </section>

            <!-- Case Study Part 1: Sensor Data Logger ‚Äî File I/O Foundation -->
            <section id="casestudy" class="section" style="scroll-margin-top: 70px;">
                <div class="section-header">
                    <div class="section-number" style="background: linear-gradient(135deg, #7c3aed, #a78bfa);">üî¨</div>
                    <h2>Case Study: Sensor Data Logger (Part 1 of 6)</h2>
                </div>
                <p>This running case study builds a complete <strong>Sensor Data Logger</strong> over Weeks 8‚Äì13, applying each week's new concept to a real mechatronics project. By Week 13, you'll have a full monitoring system!</p>

                <div class="case-study-box">
                    <div class="case-study-header">üî¨ Part 1 ‚Äî File I/O Foundation: Read, Parse, Analyze, Write</div>
                    <div class="case-study-body">
                        <p><strong>Goal:</strong> Create sample sensor CSV data, parse it into dictionaries, calculate statistics, and write a formatted report ‚Äî a complete read‚Üíparse‚Üíanalyze‚Üíwrite pipeline.</p>
                        <p><strong>What you'll build:</strong> A script that reads temperature/humidity CSV data, computes min/max/average per sensor, and generates a summary report file.</p>
                        
                        <div class="code-figure">
                            <div class="code-figure-header">
                                <span class="code-figure-label">Case Study 1 ‚Äî Sensor Data Logger: File I/O Pipeline</span>
                                <button class="code-figure-run" onclick="runCode('cs1')">‚ñ∂ Run</button>
                            </div>
                            <textarea class="code-editor" id="cs1"># === CASE STUDY Part 1: Sensor Data Logger ‚Äî File I/O ===
# Build a complete read ‚Üí parse ‚Üí analyze ‚Üí write pipeline

# --- Step 1: Create sample CSV sensor data ---
csv_data = """timestamp,sensor_id,type,value,unit
2024-01-15 08:00,T01,temperature,22.5,C
2024-01-15 08:00,H01,humidity,45.2,%
2024-01-15 08:05,T01,temperature,22.8,C
2024-01-15 08:05,H01,humidity,46.1,%
2024-01-15 08:10,T01,temperature,23.1,C
2024-01-15 08:10,H01,humidity,44.8,%
2024-01-15 08:15,T01,temperature,23.5,C
2024-01-15 08:15,H01,humidity,47.3,%
2024-01-15 08:20,T01,temperature,22.9,C
2024-01-15 08:20,H01,humidity,46.5,%"""

# --- Step 2: Parse CSV into list of dictionaries ---
lines = csv_data.strip().split("\n")
header = lines[0].split(",")
readings = []

for line in lines[1:]:
    values = line.split(",")
    record = {}
    for i, col in enumerate(header):
        record[col] = values[i]
    record["value"] = float(record["value"])  # Convert to number
    readings.append(record)

print(f"‚úÖ Parsed {len(readings)} readings")
print(f"   Sample: {readings[0]}")

# --- Step 3: Calculate statistics per sensor ---
sensor_stats = {}
for r in readings:
    sid = r["sensor_id"]
    if sid not in sensor_stats:
        sensor_stats[sid] = {"type": r["type"], "unit": r["unit"], "values": []}
    sensor_stats[sid]["values"].append(r["value"])

print(f"\nüìä Statistics per sensor:")
for sid, data in sensor_stats.items():
    vals = data["values"]
    stats = {
        "min": min(vals),
        "max": max(vals),
        "avg": sum(vals) / len(vals),
        "count": len(vals)
    }
    data["stats"] = stats
    print(f"   {sid} ({data['type']}): "
          f"min={stats['min']}, max={stats['max']}, "
          f"avg={stats['avg']:.1f} {data['unit']} "
          f"({stats['count']} readings)")

# --- Step 4: Generate formatted report ---
report_lines = []
report_lines.append("=" * 50)
report_lines.append("  SENSOR DATA LOGGER ‚Äî SUMMARY REPORT")
report_lines.append("=" * 50)
report_lines.append(f"  Total readings: {len(readings)}")
report_lines.append(f"  Sensors: {', '.join(sensor_stats.keys())}")
report_lines.append("-" * 50)

for sid, data in sensor_stats.items():
    s = data["stats"]
    report_lines.append(f"\n  [{sid}] {data['type'].upper()}")
    report_lines.append(f"    Range: {s['min']} ‚Äî {s['max']} {data['unit']}")
    report_lines.append(f"    Average: {s['avg']:.2f} {data['unit']}")
    report_lines.append(f"    Readings: {s['count']}")

report_lines.append("\n" + "=" * 50)
report_lines.append("  End of Report")
report_lines.append("=" * 50)

report = "\n".join(report_lines)
print(f"\nüìã Generated Report:\n{report}")

# In a real system, you'd write this to a file:
# with open("sensor_report.txt", "w") as f:
#     f.write(report)
print("\n‚úÖ Pipeline complete: Read ‚Üí Parse ‚Üí Analyze ‚Üí Report")
print("üîú Next week: Add error handling for corrupt data!")
</textarea>
                            <div class="code-output" id="outputcs1">
                                <div class="code-output-label">Output</div>
                                <div class="code-output-content"></div>
                            </div>
                        </div>
                        
                        <div class="warning-box info-box" style="margin-top: 20px;">
                            <p><strong>What's next?</strong> This pipeline works perfectly with clean data. But what happens when a sensor sends "N/A" or a row is missing fields? In <strong>Week 9</strong>, we'll add error handling to make this system resilient.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Submit Section -->
            <section id="submit" class="section">
                <div class="section-header">
                    <div class="section-number">üì§</div>
                    <h2>Submit Your Work</h2>
                </div>
                
                <div class="submit-section">
                    <h2>üìã Submission Form</h2>
                    <p>Complete the exercises above, then fill out this form to record your attendance and participation.</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Student ID</label>
                            <input type="text" id="studentId" placeholder="e.g., 2024001234" maxlength="10">
                        </div>
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="studentName" placeholder="e.g., Ahmet Yƒ±lmaz">
                        </div>
                        <div class="form-group">
                            <label>Email (@istun.edu.tr)</label>
                            <input type="email" id="studentEmail" placeholder="e.g., ahmet.yilmaz@istun.edu.tr">
                        </div>
                        <div class="form-group">
                            <label>Class Code (from instructor)</label>
                            <input type="text" id="classCode" placeholder="Enter code from class">
                        </div>
                    </div>
                    
                    <div class="honeypot">
                        <input type="text" id="website" tabindex="-1" autocomplete="off">
                    </div>
                    
                    <button class="submit-btn" onclick="submitWork()">Submit Week 08</button>
                    
                    <div class="submit-status" id="submitStatus"></div>
                </div>
            </section>
            
            <!-- Navigation -->
            <nav class="week-nav">
                <a class="nav-prev" href="Week_07.html">
                    <span class="nav-direction">‚Üê Previous</span>
                    <span class="nav-title">Week 07: String Operations</span>
                </a>
                <a class="nav-next" href="Week_09.html">
                    <span class="nav-direction">Next ‚Üí</span>
                    <span class="nav-title">Week 09: Error Handling</span>
                </a>
            </nav>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.code-figure').forEach(figure => {
                if (figure.closest('.exercise-code-panel')) return;
                const editor = figure.querySelector('.code-editor');
                const output = figure.querySelector('.code-output');
                if (editor && output) {
                    const splitDiv = document.createElement('div');
                    splitDiv.className = 'code-split';
                    editor.parentNode.insertBefore(splitDiv, editor);
                    splitDiv.appendChild(editor);
                    splitDiv.appendChild(output);
                }
            });
        });

        function toggleHints(id) {
            const hints = document.getElementById(id);
            hints.classList.toggle('show');
            const btn = hints.previousElementSibling;
            btn.textContent = hints.classList.contains('show') ? 'üí° Hide Hints' : 'üí° Show Hints';
        }

        let pyodideReady = false;
        let pyodide = null;

        async function runCode(codeId) {
            const codeEl = document.getElementById(codeId);
            const outputEl = document.getElementById('output' + codeId);
            const code = codeEl.value;
            outputEl.classList.add('show');
            let success = true;
            const outputContent = outputEl.querySelector('.code-output-content') || outputEl;
            try {
                if (!pyodideReady) {
                    outputContent.textContent = 'Initializing Python (first run may take a moment)...';
                    pyodide = await loadPyodide();
                    pyodideReady = true;
                }
                outputContent.textContent = 'Running...';
                pyodide.runPython('import sys\nfrom io import StringIO\nsys.stdout = StringIO()');
                try {
                    pyodide.runPython(code);
                } catch (pyErr) {
                    outputContent.textContent = 'Error: ' + pyErr.message;
                    if (typeof autoSizeCodeBlock === 'function') autoSizeCodeBlock(codeEl);
                    return false;
                }
                const output = pyodide.runPython('sys.stdout.getvalue()');
                outputContent.textContent = output || '(no output)';
            } catch(e) {
                outputContent.textContent = 'Error: ' + e.message;
                success = false;
            }
            if (typeof autoSizeCodeBlock === 'function') autoSizeCodeBlock(codeEl);
            return success;
        }

        async function runAllCode() {
            const btn = document.getElementById('runAllBtn');
            btn.className = 'run-all-btn running';
            btn.textContent = '‚è≥ Running...';
            const allTextareas = document.querySelectorAll('.code-split textarea[id^="code"]');
            let passed = 0, failed = 0, total = allTextareas.length;
            const failedListings = [];
            let firstFailedFigure = null;
            document.querySelectorAll('.code-run-status').forEach(el => el.remove());
            for (const ta of allTextareas) {
                const codeId = ta.id;
                const figure = ta.closest('.code-figure');
                const header = figure.querySelector('.code-figure-header');
                const label = header.querySelector('.code-figure-label');
                const status = document.createElement('span');
                status.className = 'code-run-status';
                header.appendChild(status);
                try {
                    const ok = await runCode(codeId);
                    if (ok) { status.textContent = '‚úì'; status.classList.add('pass', 'visible'); passed++; }
                    else {
                        const n = label ? label.textContent.trim() : codeId;
                        status.textContent = '‚úó error'; status.classList.add('fail', 'visible');
                        failedListings.push(n); if (!firstFailedFigure) firstFailedFigure = figure; failed++;
                    }
                } catch (e) {
                    const n = label ? label.textContent.trim() : codeId;
                    status.textContent = '‚úó error'; status.classList.add('fail', 'visible');
                    failedListings.push(n); if (!firstFailedFigure) firstFailedFigure = figure; failed++;
                }
            }
            if (failed === 0) { btn.className = 'run-all-btn success'; btn.textContent = `‚úì All ${passed} passed`; }
            else {
                btn.className = 'run-all-btn failure'; btn.textContent = `‚úó ${failed}/${total} failed`;
                if (firstFailedFigure) {
                    firstFailedFigure.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstFailedFigure.style.outline = '2px solid #f87171';
                    firstFailedFigure.style.outlineOffset = '4px';
                    firstFailedFigure.style.borderRadius = '8px';
                    setTimeout(() => { firstFailedFigure.style.outline = 'none'; }, 5000);
                }
                console.log('Failed listings:', failedListings);
            }
            setTimeout(() => { btn.className = 'run-all-btn'; btn.textContent = '‚ñ∂ Run All'; }, 10000);
        }

        const sections = [
            { id: 'recap',      label: 'üß† Recap Quiz: Week 7' },
            { id: 'part1',      label: 'Opening and Closing Files' },
            { id: 'part2',      label: 'Reading Files' },
            { id: 'part3',      label: 'Writing Files' },
            { id: 'part4',      label: 'Working with CSV Files' },
            { id: 'part5',      label: 'Working with JSON Files' },
            { id: 'part6',      label: 'File Paths and Directories' },
            { id: 'part7',      label: 'File Exception Handling' },
            { id: 'part8',      label: 'Binary Files' },
            { id: 'part9',      label: 'Engineering Applications' },
            { id: 'mistakes',   label: '‚ùå Common Mistakes' },
            { id: 'exercises',  label: 'Practice Exercises' },
            { id: 'casestudy',  label: 'üî¨ Case Study: Part 1' },
            { id: 'submit',     label: 'Submit Your Work' }
        ];

        const visited = new Set();
        let currentIdx = 0;
        const dropdown = document.getElementById('tocDropdown');
        sections.forEach((s, i) => {
            const a = document.createElement('a');
            a.className = 'toc-item'; a.href = '#' + s.id;
            a.innerHTML = `<span class="toc-num">${i + 1}.</span> ${s.label} <span class="toc-check">‚úì</span>`;
            a.addEventListener('click', (e) => { e.preventDefault(); document.getElementById(s.id).scrollIntoView({ behavior: 'smooth' }); document.getElementById('tocCenter').classList.remove('open'); });
            dropdown.appendChild(a);
        });
        document.addEventListener('click', (e) => { const toc = document.getElementById('tocCenter'); if (!toc.contains(e.target)) toc.classList.remove('open'); });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const idx = sections.findIndex(s => s.id === entry.target.id);
                    if (idx !== -1) { currentIdx = idx; visited.add(idx); updateTOC(); }
                }
            });
        }, { rootMargin: '-20% 0px -60% 0px' });
        sections.forEach(s => { const el = document.getElementById(s.id); if (el) observer.observe(el); });

        function updateTOC() {
            document.getElementById('tocCurNum').textContent = (currentIdx + 1) + '.';
            document.getElementById('tocCurLabel').textContent = sections[currentIdx].label;
            dropdown.querySelectorAll('.toc-item').forEach((item, i) => {
                item.classList.toggle('active', i === currentIdx);
                if (visited.has(i)) item.classList.add('visited');
            });
        }

        const C = 2 * Math.PI * 19;
        window.addEventListener('scroll', () => {
            const h = document.documentElement.scrollHeight - window.innerHeight;
            const pct = h > 0 ? Math.min(window.scrollY / h, 1) : 0;
            document.getElementById('topbarProgress').style.width = (pct * 100) + '%';
            const badge = document.getElementById('scrollProgress');
            badge.classList.toggle('visible', window.scrollY > 200);
            document.getElementById('scrollPct').textContent = Math.round(pct * 100) + '%';
            document.getElementById('scrollCircle').style.strokeDashoffset = C * (1 - pct);
        });

        function initAutoSize() {
            document.querySelectorAll('.code-split textarea').forEach(ta => {
                const sizer = document.createElement('div');
                sizer.className = 'code-input-sizer';
                ta.parentNode.insertBefore(sizer, ta);
                sizer.appendChild(ta);
                const mirror = document.createElement('div');
                mirror.className = 'code-input-mirror';
                mirror.setAttribute('aria-hidden', 'true');
                sizer.appendChild(mirror);
                function sync() { mirror.textContent = ta.value + '\n'; }
                ta.addEventListener('input', sync);
                sync();
            });
        }
        function autoSizeCodeBlock() {}
        if (document.fonts) { document.fonts.ready.then(initAutoSize); }
        else { window.addEventListener('load', initAutoSize); }

        // Form validation and submission
        const pageLoadTime = Date.now();
        
        // ============ ANTI-CHEAT SYSTEM ============
        // Store original/default code for each exercise
        const originalExerciseCode = {};
        // Track keystroke counts per exercise
        const keystrokeCounts = {};
        // Track if paste was attempted
        const pasteAttempts = {};
        
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.code-editor[id^="ex"]').forEach(textarea => {
                const exId = textarea.id;
                
                // Store original code
                originalExerciseCode[exId] = textarea.value;
                keystrokeCounts[exId] = 0;
                pasteAttempts[exId] = 0;
                
                // Block paste
                textarea.addEventListener('paste', function(e) {
                    e.preventDefault();
                    pasteAttempts[exId]++;
                    // Show warning
                    const warning = document.createElement('div');
                    warning.textContent = '‚ö†Ô∏è Paste is disabled. Please type your code.';
                    warning.style.cssText = 'color:#f87171;font-size:12px;margin-top:5px;';
                    warning.className = 'paste-warning';
                    // Remove existing warning if any
                    const existingWarning = textarea.parentElement.querySelector('.paste-warning');
                    if (existingWarning) existingWarning.remove();
                    textarea.parentElement.appendChild(warning);
                    // Auto-remove warning after 3 seconds
                    setTimeout(() => warning.remove(), 3000);
                });
                
                // Block drag & drop
                textarea.addEventListener('drop', function(e) {
                    e.preventDefault();
                });
                
                // Count keystrokes (only actual typing keys)
                textarea.addEventListener('keydown', function(e) {
                    // Count printable characters, backspace, delete, enter, tab
                    if (e.key.length === 1 || ['Backspace', 'Delete', 'Enter', 'Tab'].includes(e.key)) {
                        keystrokeCounts[exId]++;
                    }
                });
            });
        });
        
        // Check if code was actually modified by student (with meaningful effort)
        function isCodeModified(exId, currentCode) {
            const original = originalExerciseCode[exId] || '';
            const keystrokes = keystrokeCounts[exId] || 0;
            
            // Normalize whitespace for comparison
            const normalizedOriginal = original.trim().replace(/\s+/g, ' ');
            const normalizedCurrent = currentCode.trim().replace(/\s+/g, ' ');
            
            // Must be different from original
            if (normalizedOriginal === normalizedCurrent) return false;
            
            // Must have typed at least 20 keystrokes (prevents minimal changes)
            if (keystrokes < 20) return false;
            
            // Remove comments and check if anything substantial remains
            const withoutComments = currentCode.replace(/#.*$/gm, '').replace(/"""[\s\S]*?"""/g, '').replace(/'''[\s\S]*?'''/g, '').trim();
            const originalWithoutComments = original.replace(/#.*$/gm, '').replace(/"""[\s\S]*?"""/g, '').replace(/'''[\s\S]*?'''/g, '').trim();
            
            // Must have added meaningful code (not just modified comments)
            if (withoutComments.length <= originalWithoutComments.length + 10) return false;
            
            return true;
        }
        // ============ END ANTI-CHEAT ============
        
        function validateStudentId(id) {

            if (id.length < 6 || id.length > 10) return false;
            if (!/^\d+$/.test(id)) return false;
            if (/^(\d)\1+$/.test(id)) return false;
            return true;
        }
        
        function validateName(name) {
            if (name.length < 5) return false;
            const words = name.trim().split(/\s+/);
            if (words.length < 2) return false;
            if (!/^[A-Za-zƒü√º≈üƒ±√∂√ßƒû√ú≈ûƒ∞√ñ√á\s]+$/.test(name)) return false;
            return true;
        }
        
        function validateEmail(email) {
            return email.endsWith('@istun.edu.tr') && email.length > 15;
        }
        
        async function submitWork() {
            const status = document.getElementById('submitStatus');
            status.style.display = 'none';
            
            const studentId = document.getElementById('studentId').value.trim();
            const studentName = document.getElementById('studentName').value.trim();
            const studentEmail = document.getElementById('studentEmail').value.trim().toLowerCase();
            const classCode = document.getElementById('classCode').value.trim().toUpperCase();
            const honeypot = document.getElementById('website').value;
            
            // Bot check
            if (honeypot) {
                status.textContent = '‚ùå Submission rejected.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Time check
            const timeOnPage = Math.floor((Date.now() - pageLoadTime) / 1000);
            if (timeOnPage < 60) {
                status.textContent = '‚ùå Please spend more time reviewing the material.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Required fields
            if (!studentId || !studentName || !studentEmail || !classCode) {
                status.textContent = '‚ùå All fields are required.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate student ID
            if (!validateStudentId(studentId)) {
                status.textContent = '‚ùå Invalid Student ID (must be 6-10 digits).';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate name
            if (!validateName(studentName)) {
                status.textContent = '‚ùå Please enter your full name (first and last).';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate email
            if (!validateEmail(studentEmail)) {
                status.textContent = '‚ùå Please use your @istun.edu.tr email.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            // Validate class code
            if (classCode.length < 4) {
                status.textContent = '‚ùå Invalid class code.';
                status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                return;
            }
            
            status.textContent = '‚è≥ Collecting answers and submitting...';
            status.style.cssText = 'display:block;background:rgba(124,58,237,0.2);color:#a78bfa';
            
            // Collect all exercise answers with anti-cheat data
            const answers = {};
            const exerciseCards = document.querySelectorAll('.exercise-card');
            exerciseCards.forEach((card, index) => {
                const exNum = index + 1;
                const titleEl = card.querySelector('.exercise-title');
                const descEl = card.querySelector('.exercise-description');
                const codeEl = card.querySelector('.code-editor[id^="ex"]');
                
                if (codeEl) {
                    const exId = codeEl.id;
                    const code = codeEl.value || '';
                    const wasModified = isCodeModified(exId, code);
                    
                    answers[exId] = {
                        title: titleEl ? titleEl.textContent.replace(/^\d+/, '').trim() : 'Exercise ' + exNum,
                        description: descEl ? descEl.textContent.trim() : '',
                        code: code,
                        modified: wasModified,
                        keystrokes: keystrokeCounts[exId] || 0,
                        pasteAttempts: pasteAttempts[exId] || 0
                    };
                }
            });

            
            // Fetch IP and location
            let ipAddress = 'Unknown';
            let location = 'Unknown';
            try {
                const ipResponse = await fetch('https://ipapi.co/json/', { timeout: 5000 });
                if (ipResponse.ok) {
                    const ipData = await ipResponse.json();
                    ipAddress = ipData.ip || 'Unknown';
                    location = (ipData.city && ipData.country_name) 
                        ? `${ipData.city}, ${ipData.country_name}` 
                        : (ipData.country_name || 'Unknown');
                }
            } catch (e) {
                console.log('Could not fetch IP info');
            }
            
            const data = {
                week: 'Week_08',
                studentId: studentId,
                studentName: studentName,
                studentEmail: studentEmail,
                classCode: classCode,
                timeOnPage: timeOnPage,
                source: 'cp2-web',
                answers: answers,
                ipAddress: ipAddress,
                location: location
            };
            
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbyf1D3HGSAX4MoIhNlAuWlGrFyyvbM5MIv7ZsLxrVDlATUihrRGEAaibvIZYlCfd8Me/exec';
            
            fetch(scriptUrl, {
                method: 'POST',
                mode: 'cors',
                headers: { 'Content-Type': 'text/plain' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    status.textContent = '‚úÖ ' + result.message + ' Check your email for confirmation with your submitted answers.';
                    status.style.cssText = 'display:block;background:rgba(5,150,105,0.2);color:#6ee7b7';
                } else {
                    status.textContent = '‚ùå ' + result.message;
                    status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                }
            })
            .catch(error => {
                fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify(data)
                })
                .then(() => {
                    status.textContent = '‚ö†Ô∏è Request sent. Check your email for confirmation.';
                    status.style.cssText = 'display:block;background:rgba(217,119,6,0.2);color:#fcd34d';
                })
                .catch(() => {
                    status.textContent = '‚ùå Connection error. Please try again.';
                    status.style.cssText = 'display:block;background:rgba(220,38,38,0.2);color:#fca5a5';
                });
            });
        }
    </script>
</body>
</html>
