<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Week 06 â€” PhoneLab</title>
  <link rel="stylesheet" href="../assets/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-title">Week 06 â€” Screen Time Category Tracker</div>
      <div class="brand-sub"><a href="../index.html">â† Back to PhoneLab Hub</a></div>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h1 style="margin:0 0 4px;">ğŸ“Š Screen Time Category Tracker</h1>
      <p class="muted" style="margin:0 0 12px;">
        Map your digital habits! Pull data from <b>Screen Time / Digital Wellbeing</b>
        and use <em>dictionaries, sets, and comprehensions</em> to analyze where
        your screen hours really go.
      </p>

      <div class="concepts-box">
        <b>ğŸ“š Concepts you'll practice (from Week 06):</b>
        <span class="concept-tag">dictionaries</span>
        <span class="concept-tag">get() / keys() / values() / items()</span>
        <span class="concept-tag">dict comprehension</span>
        <span class="concept-tag">nested dicts</span>
        <span class="concept-tag">sets</span>
        <span class="concept-tag">set operations (âˆª âˆ© âˆ’)</span>
      </div>

      <!-- Step indicator -->
      <div class="steps" style="margin-top:14px;">
        <div class="step-pill active" data-step="1">â‘  Identity</div>
        <div class="step-pill" data-step="2">â‘¡ Data</div>
        <div class="step-pill" data-step="3">â‘¢ Code</div>
        <div class="step-pill" data-step="4">â‘£ Run & Submit</div>
      </div>

      <details open id="sec1">
        <summary><b>1) Identity</b> <span class="muted">(required)</span></summary>
        <div class="row">
          <div>
            <label>Student ID (6â€“12 digits)</label>
            <input id="studentId" inputmode="numeric" minlength="6" maxlength="12"
                   pattern="^\d{6,12}$" required placeholder="e.g., 202612345" />
          </div>
          <div>
            <label>Name Surname</label>
            <input id="nameSurname" required placeholder="e.g., Arif Solmaz" />
          </div>
        </div>
        <label>Email (@istun.edu.tr)</label>
        <input id="email" type="email"
               pattern="^[A-Za-z0-9._%+-]+@istun\.edu\.tr$"
               required placeholder="name@istun.edu.tr" />
        <small class="hint">Draft auto-saves on this device.</small>
      </details>

      <hr />

      <details open id="sec2">
        <summary><b>2) Collect your data</b> <span class="muted">(from your phone)</span></summary>

        <div class="scenario-box">
          <b>ğŸ”¬ What to do:</b>
          <ol class="muted" style="margin:6px 0 0; padding-left:20px;">
            <li>Open your phone's screen time tracker:
              <ul style="margin-top:4px;">
                <li><b>iPhone:</b> Settings â†’ Screen Time â†’ See All App & Website Activity</li>
                <li><b>Samsung:</b> Settings â†’ Digital Wellbeing â†’ Screen time</li>
                <li><b>Other Android:</b> Settings â†’ Digital Wellbeing â†’ Dashboard</li>
              </ul>
            </li>
            <li>Pick <b>8 apps</b> you used this week. For each app record:
              <ul style="margin-top:4px;">
                <li><b>App name</b> (e.g., Instagram, WhatsApp, YouTube)</li>
                <li><b>Daily minutes</b> (average or today's usage)</li>
                <li><b>Category:</b> social / entertainment / productivity / utility / education / communication</li>
                <li><b>Notifications/day</b> (approximate count)</li>
              </ul>
            </li>
          </ol>
          <small>ğŸ’¡ <b>Tip:</b> Pick a mix of categories for interesting analysis. Include at least one from social, entertainment, and productivity.</small>
        </div>

        <label>Your measurements (edit the data)</label>
        <textarea id="dataBox" spellcheck="false"></textarea>
        <small class="hint">âš ï¸ Change to <b>your own</b> apps and numbers. Default values will be rejected.</small>
      </details>

      <hr />

      <details id="sec3">
        <summary><b>3) Python code</b> <span class="muted">(dicts, sets, comprehensions)</span></summary>
        <label>Python â€” analyze your screen time with dicts &amp; sets</label>
        <textarea id="codeBox" class="codebox" spellcheck="false"></textarea>
        <small class="hint">
          Use <b>dictionaries</b>, <b>.get()</b>, <b>.items()</b>,
          <b>dict comprehensions</b>, <b>sets</b>, and <b>set operations</b>.
        </small>
      </details>

      <hr />

      <details id="sec4">
        <summary><b>4) Output</b> <span class="muted">(auto-captured after Run)</span></summary>
        <pre id="output" class="out">Click "â–¶ Run Python" to see output here.</pre>
      </details>

      <div class="stickybar">
        <div class="bar-actions">
          <button id="helpBtn" class="helpbtn" type="button">?</button>
          <button id="runBtn" type="button">â–¶ Run Python</button>
          <button id="submitBtn" class="primary" type="button">Submit âœ“</button>
        </div>
        <small id="status" class="hint"></small>
      </div>
    </section>
  </main>

  <!-- Help Modal -->
  <div id="helpModal" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h3>ğŸ“Š Week 06 â€” Instructions</h3>
      <ol class="muted">
        <li><b>Identity:</b> Student ID (6â€“12 digits), Name Surname, <b>@istun.edu.tr</b> email.</li>
        <li><b>Find your data:</b> Open Screen Time (iPhone) or Digital Wellbeing (Android). Look at today's or this week's app usage.</li>
        <li><b>Enter data:</b> 8 apps, each on its own line: <code>AppName,minutes,category,notifications</code></li>
        <li><b>Write code:</b> Complete the TODOs â€” build dicts, use comprehensions, apply set operations.</li>
        <li><b>Run:</b> Tap "â–¶ Run Python" and check the digital habits report.</li>
        <li><b>Submit:</b> One submission only. Confirmation opens in a new tab.</li>
      </ol>
      <p class="muted" style="margin-top:10px;">
        <b>ğŸ“ The engineering:</b> In mechatronics, sensor configurations are stored as
        dictionaries (key-value maps), device registries use nested dicts, and set
        operations determine which sensors share capabilities or require unique
        calibration. The patterns you learn here â€” lookup, grouping, filtering,
        intersection â€” are used daily in embedded systems and IoT platforms!
      </p>
      <div class="modal-actions">
        <button id="closeHelpBtn" type="button">Got it</button>
      </div>
    </div>
  </div>

  <script src="../assets/app.js"></script>
  <script>
    const WEEK = "week06";
    const DEADLINE = new Date("2026-03-25T23:59:00+03:00");

    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxu_JAL7pMXz_7bSGC7kIYvs76UGJji8ubbmr6h7rnLY-M2deKSubTxTiekeKecMclC/exec";

    const studentIdEl   = document.getElementById("studentId");
    const nameSurnameEl = document.getElementById("nameSurname");
    const emailEl       = document.getElementById("email");
    const dataEl        = document.getElementById("dataBox");
    const codeEl        = document.getElementById("codeBox");
    const outEl         = document.getElementById("output");
    const statusEl      = document.getElementById("status");

    // â”€â”€ Default data â”€â”€
    const defaultData =
`Instagram,45,social,62
YouTube,38,entertainment,15
WhatsApp,32,communication,120
Chrome,25,utility,8
Spotify,20,entertainment,5
Twitter,18,social,40
Notion,12,productivity,3
Duolingo,10,education,6`;

    const starterCode =
`# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Week 06 â€” Screen Time Category Tracker
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Parse data into a list of raw rows
_lines = DATA.strip().split("\\n")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 1: Build a NESTED DICTIONARY from the data
#         Key = app name
#         Value = dict with "minutes", "category", "notifications"
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

apps = {}
for line in _lines:
    parts = line.split(",")
    name = parts[0].strip()
    apps[name] = {
        "minutes": int(parts[1].strip()),
        "category": parts[2].strip().lower(),
        "notifications": int(parts[3].strip())
    }

print("=" * 55)
print("ğŸ“Š SCREEN TIME CATEGORY TRACKER")
print("=" * 55)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 2: Use .items() to print each app's details
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print("\\nAPP DETAILS:")
for app_name, info in apps.items():
    print(f"  {app_name:15s} {info['minutes']:3d} min  "
          f"{info['category']:15s} {info['notifications']:3d} notifs")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 3: Use .get() with defaults
#         Look up an app that may or may not exist
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print(f"\\n{'â”€' * 55}")
print("SAFE LOOKUPS with .get():")

tiktok_info = apps.get("TikTok", {"minutes": 0, "category": "unknown", "notifications": 0})
print(f"  TikTok minutes: {tiktok_info['minutes']} (default if not found)")

# Use .get() on inner dict too
for app_name, info in apps.items():
    bg = info.get("background", "N/A")   # key doesn't exist â†’ default
    break   # just demo one
print(f"  Background usage of {app_name}: {bg}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 4: Use .keys(), .values() for stats
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print(f"\\n{'â”€' * 55}")
print("BASIC STATS:")

all_app_names = list(apps.keys())
all_minutes = [info["minutes"] for info in apps.values()]
total_minutes = sum(all_minutes)
total_notifs = sum(info["notifications"] for info in apps.values())

print(f"  Apps tracked    : {len(all_app_names)}")
print(f"  Total screen time: {total_minutes} min ({total_minutes / 60:.1f} hrs)")
print(f"  Total notifications: {total_notifs}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 5: DICT COMPREHENSION â€” filter time-wasters
#         Time-waster = social or entertainment AND > 20 min
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print(f"\\n{'â”€' * 55}")
print("TIME-WASTER FILTER (dict comprehension):")

time_wasters = {
    name: info["minutes"]
    for name, info in apps.items()
    if info["category"] in ("social", "entertainment") and info["minutes"] > 20
}

for name, mins in time_wasters.items():
    print(f"  âš ï¸ {name}: {mins} min")
wasted = sum(time_wasters.values())
print(f"  Total wasted: {wasted} min ({wasted * 100 // total_minutes}% of screen time)")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 6: Build CATEGORY TOTALS dict
#         Group minutes by category using dict accumulation
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print(f"\\n{'â”€' * 55}")
print("CATEGORY BREAKDOWN:")

category_totals = {}
for name, info in apps.items():
    cat = info["category"]
    category_totals[cat] = category_totals.get(cat, 0) + info["minutes"]

for cat, mins in sorted(category_totals.items(), key=lambda x: x[1], reverse=True):
    bar = "â–ˆ" * (mins // 5)
    pct = mins * 100 / total_minutes
    print(f"  {cat:15s} {mins:3d} min ({pct:4.1f}%) {bar}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 7: Use SETS â€” unique categories and set operations
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print(f"\\n{'â”€' * 55}")
print("SET OPERATIONS:")

all_categories = {info["category"] for info in apps.values()}
print(f"  All categories found : {all_categories}")

# Define productive vs unproductive category sets
productive_cats = {"productivity", "education", "utility"}
unproductive_cats = {"social", "entertainment"}

# Set intersection: which productive categories do you actually use?
your_productive = all_categories & productive_cats
your_unproductive = all_categories & unproductive_cats
print(f"  Your productive cats : {your_productive}")
print(f"  Your unproductive cats: {your_unproductive}")

# Set difference: which productive categories are you missing?
missing_productive = productive_cats - all_categories
print(f"  Missing productive   : {missing_productive if missing_productive else 'None â€” you have all!'}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 8: Set of HEAVY-USE apps and HIGH-NOTIF apps
#         Find the INTERSECTION (double trouble!)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

heavy_use_apps = {name for name, info in apps.items() if info["minutes"] >= 25}
high_notif_apps = {name for name, info in apps.items() if info["notifications"] >= 30}

print(f"\\n  Heavy use (25+ min)  : {heavy_use_apps}")
print(f"  High notifs (30+)    : {high_notif_apps}")

double_trouble = heavy_use_apps & high_notif_apps
only_time = heavy_use_apps - high_notif_apps
only_notifs = high_notif_apps - heavy_use_apps

print(f"  âš ï¸ Double trouble    : {double_trouble if double_trouble else 'None'}")
print(f"  Time only (not notif): {only_time if only_time else 'None'}")
print(f"  Notifs only (not time): {only_notifs if only_notifs else 'None'}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# TODO 9: DICT COMPREHENSION â€” notification rate
#         Create dict of notifs-per-minute for each app
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print(f"\\n{'â”€' * 55}")
print("NOTIFICATION DENSITY (notifs per minute):")

notif_rate = {
    name: round(info["notifications"] / info["minutes"], 2) if info["minutes"] > 0 else 0
    for name, info in apps.items()
}

for name, rate in sorted(notif_rate.items(), key=lambda x: x[1], reverse=True):
    label = "ğŸ”´ Distracting" if rate > 2.0 else "ğŸŸ¡ Moderate" if rate > 0.5 else "âœ… Focused"
    print(f"  {name:15s} {rate:.2f} notif/min â†’ {label}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# DIGITAL WELLNESS VERDICT
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

print(f"\\n{'=' * 55}")

productive_mins = sum(
    info["minutes"] for info in apps.values()
    if info["category"] in productive_cats
)
productive_pct = productive_mins * 100 / total_minutes if total_minutes > 0 else 0

if productive_pct >= 50:
    grade = "A â€” Digital Minimalist"
elif productive_pct >= 30:
    grade = "B â€” Balanced User"
elif productive_pct >= 15:
    grade = "C â€” Leaning Entertainment"
else:
    grade = "D â€” Scroll Addict"

print(f"DIGITAL WELLNESS GRADE: {grade}")
print(f"  Productive time: {productive_mins} min ({productive_pct:.0f}%)")
print(f"  Double trouble apps: {len(double_trouble)}")
print(f"  Categories used: {len(all_categories)}")
print("=" * 55)
`;

    // â”€â”€ Wiring â”€â”€
    function save(){
      PhoneLabUI.saveDraft(WEEK, {
        studentId: studentIdEl.value, nameSurname: nameSurnameEl.value,
        email: emailEl.value, data: dataEl.value, code: codeEl.value,
        output: outEl.textContent, savedAt: new Date().toISOString()
      });
      statusEl.textContent = "Draft saved.";
    }

    function submitViaForm(payload){
      const form = document.createElement("form");
      form.method = "POST"; form.action = SCRIPT_URL; form.target = "_blank";
      const inp = document.createElement("input");
      inp.type = "hidden"; inp.name = "payload"; inp.value = JSON.stringify(payload);
      form.appendChild(inp); document.body.appendChild(form); form.submit(); form.remove();
    }

    const draft = PhoneLabUI.loadDraft(WEEK);
    if (draft){
      studentIdEl.value   = draft.studentId || "";
      nameSurnameEl.value = draft.nameSurname || "";
      emailEl.value       = draft.email || "";
      dataEl.value        = draft.data || defaultData;
      codeEl.value        = draft.code || starterCode;
      outEl.textContent   = draft.output || 'Click "â–¶ Run Python" to see output here.';
      statusEl.textContent = "Draft loaded.";
    } else {
      dataEl.value = defaultData;
      codeEl.value = starterCode;
    }

    [studentIdEl, nameSurnameEl, emailEl, dataEl, codeEl].forEach(el =>
      el.addEventListener("input", save));

    document.getElementById("runBtn").addEventListener("click", async () => {
      statusEl.textContent = "Loading Python runtimeâ€¦";
      const dataLiteral = JSON.stringify(dataEl.value);
      const codeToRun = `DATA = ${dataLiteral}\n\n` + codeEl.value;
      try {
        const out = await PhoneLabUI.runPythonCapture(codeToRun);
        outEl.textContent = out || "(no output)";
        statusEl.textContent = "âœ… Run complete.";
        save();
      } catch (e) {
        outEl.textContent = String(e);
        statusEl.textContent = "âŒ Error â€” check your code.";
        save();
      }
    });

    document.getElementById("submitBtn").addEventListener("click", () => {
      const studentId   = studentIdEl.value.trim();
      const nameSurname = nameSurnameEl.value.trim();
      const email       = emailEl.value.trim().toLowerCase();

      if (!/^\d{6,12}$/.test(studentId))
        { statusEl.textContent = "Student ID must be 6â€“12 digits."; return; }
      if (nameSurname.split(/\s+/).filter(Boolean).length < 2)
        { statusEl.textContent = "Enter Name and Surname."; return; }
      if (!/^[A-Za-z0-9._%+-]+@istun\.edu\.tr$/.test(email))
        { statusEl.textContent = "Email must be @istun.edu.tr"; return; }

      if (new Date() > DEADLINE) {
        statusEl.textContent = "â° Submission closed â€” deadline was Mar 25, 23:59.";
        return;
      }

      if (dataEl.value.replace(/\s+/g,"") === defaultData.replace(/\s+/g,"")) {
        statusEl.textContent = "âš ï¸ Enter YOUR OWN screen time data â€” default values are not accepted.";
        dataEl.style.outline = "2px solid #ef4444";
        setTimeout(() => dataEl.style.outline = "", 3000);
        return;
      }

      if (!outEl.textContent || outEl.textContent.includes("Click") || outEl.textContent === "(no output)")
        { statusEl.textContent = "âš ï¸ Run your code first before submitting."; return; }

      const payload = {
        week: WEEK, studentId, nameSurname, email,
        data: dataEl.value, code: codeEl.value, output: outEl.textContent,
        userAgent: navigator.userAgent, submittedAt: new Date().toISOString()
      };
      statusEl.textContent = "Submittingâ€¦";
      submitViaForm(payload);
      PhoneLabUI.setStatus(WEEK, "submitted");
    });

    const helpModal = document.getElementById("helpModal");
    document.getElementById("helpBtn").addEventListener("click", () => helpModal.style.display = "flex");
    document.getElementById("closeHelpBtn").addEventListener("click", () => helpModal.style.display = "none");
    helpModal.addEventListener("click", e => { if (e.target === helpModal) helpModal.style.display = "none"; });
    document.addEventListener("keydown", e => { if (e.key === "Escape") helpModal.style.display = "none"; });
  </script>
</body>
</html>
